{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldButton.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldButton.vue","mtime":1576581289804},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAnLi4vdXRpbHMvaHR0cCc7CmltcG9ydCB7IGNsYXNzUHJpZml4IH0gZnJvbSAnLi4vdXRpbHMvY29uc3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgaW5qZWN0OiBbJ2Zvcm0nXSwKICBwcm9wczogewogICAgZmllbGQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGFwaUJhc2U6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRleHQ6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNsYXNzZXM6IGZ1bmN0aW9uIGNsYXNzZXMoKSB7CiAgICAgIHJldHVybiAiIi5jb25jYXQoY2xhc3NQcmlmaXgsICItIikuY29uY2F0KHRoaXMuZmllbGQudHlwZS50b0xvd2VyQ2FzZSgpKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnRleHQgPSB0aGlzLmZpZWxkLnRleHQ7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soKSB7CiAgICAgIHN3aXRjaCAodGhpcy5maWVsZC5hY3Rpb24udHlwZSkgewogICAgICAgIGNhc2UgJ2FqYXgnOgogICAgICAgICAgdGhpcy5kb0FqYXhBY3Rpb24oKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdldmVudCc6CiAgICAgICAgICB0aGlzLiRlbWl0KCdvbi1idXR0b24tY2xpY2snLCB7CiAgICAgICAgICAgIG5hbWU6IHRoaXMuZmllbGQuYWN0aW9uLm5hbWUKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZG9BamF4QWN0aW9uOiBmdW5jdGlvbiBkb0FqYXhBY3Rpb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgYXBpQmFzZSA9IHRoaXMuYXBpQmFzZSB8fCAnJzsKICAgICAgdmFyIGZvcm1Nb2RlbCA9IHRoaXMuZm9ybS5tb2RlbDsKICAgICAgdmFyIGFwaVBhcmFtcyA9IHRoaXMuZmllbGQuYXBpUGFyYW1zIHx8IFtdOwogICAgICB2YXIgcGFyYW1zID0ge307CiAgICAgIHZhciBmaW5hbEFwaSA9IGFwaUJhc2UgKyB0aGlzLmZpZWxkLmFjdGlvbi5hcGk7CiAgICAgIGFwaVBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkgewogICAgICAgIHBhcmFtc1twYXJhbV0gPSBmb3JtTW9kZWxbcGFyYW1dOwogICAgICB9KTsKICAgICAgdmFyIGZpbmFsUGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKTsKICAgICAgdGhpcy5yZXF1ZXN0TWV0aG9kKGZpbmFsQXBpLCBmaW5hbFBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMucmVxdWVzdFJlc29sdmUocmVzKTsKICAgICAgfSwgZnVuY3Rpb24gKHJlamVjdCkgewogICAgICAgIF90aGlzLnJlcXVlc3RSZWplY3QocmVqZWN0KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVxdWVzdFJlc29sdmU6IGZ1bmN0aW9uIHJlcXVlc3RSZXNvbHZlKHJlcykgewogICAgICBpZiAoK3Jlcy5zdGF0dXMgPT09IDAgfHwgK3Jlcy5lcnJubyA9PT0gMCB8fCArcmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgdGhpcy50ZXh0ID0gcmVzLmRhdGEudGV4dDsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHJlcXVlc3RSZWplY3Q6IGZ1bmN0aW9uIHJlcXVlc3RSZWplY3QocmVqZWN0KSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgIGNvbnNvbGUubG9nKHJlamVjdCk7CiAgICB9LAogICAgcmVxdWVzdE1ldGhvZDogZnVuY3Rpb24gcmVxdWVzdE1ldGhvZCh1cmwsIGZpbmFsUGFyYW1zKSB7CiAgICAgIGlmICh0aGlzLnJlcXVlc3RJbnRlcmNlcHRvcikgewogICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RJbnRlcmNlcHRvcih1cmwsIGZpbmFsUGFyYW1zKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLkZvcm1HZW5lcmF0b3JJbnN0YWxsT3B0aW9ucyAmJiB0aGlzLkZvcm1HZW5lcmF0b3JJbnN0YWxsT3B0aW9ucy5yZXF1ZXN0SW50ZXJjZXB0b3IpIHsKICAgICAgICByZXR1cm4gdGhpcy5Gb3JtR2VuZXJhdG9ySW5zdGFsbE9wdGlvbnMucmVxdWVzdEludGVyY2VwdG9yKHVybCwgZmluYWxQYXJhbXMpOwogICAgICB9CgogICAgICByZXR1cm4gYXhpb3MucmVxdWVzdCh7CiAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICBwYXJhbXM6IGZpbmFsUGFyYW1zCiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["fieldButton.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <Poptip\n        v-if=\"field.confirmPoptip\"\n        confirm\n        :title=\"field.confirmPoptip.title\"\n        :placement=\"field.confirmPoptip.placement\"\n        :class=\"classes\"\n        @on-ok=\"handleClick\"\n    >\n        <Button\n            :type=\"field.subtype || 'default'\"\n            :size=\"field.size || 'default'\"\n        >{{ field.text }}</Button>\n    </Poptip>\n    <Button\n        v-else\n        :type=\"field.subtype || 'default'\"\n        :size=\"field.size || 'default'\"\n        :class=\"classes\"\n        @click=\"handleClick\"\n    >{{ text }}</Button>\n</template>\n<script>\nimport axios from '../utils/http';\nimport {classPrifix} from '../utils/const';\nexport default {\n    inject: ['form'],\n    props: {\n        field: {\n            type: Object,\n            required: true\n        },\n        apiBase: {\n            type: String,\n            default: ''\n        }\n    },\n    data() {\n        return {\n            text: ''\n        };\n    },\n    computed: {\n        classes() {\n            return `${classPrifix}-${this.field.type.toLowerCase()}`;\n        },\n    },\n    mounted() {\n        this.text = this.field.text;\n    },\n    methods: {\n        handleClick() {\n            switch (this.field.action.type) {\n                case 'ajax':\n                    this.doAjaxAction();\n                    break;\n                case 'event':\n                    this.$emit('on-button-click', {\n                        name: this.field.action.name\n                    });\n            }\n        },\n        doAjaxAction() {\n            this.loading = true;\n            let apiBase = this.apiBase || '';\n            let formModel = this.form.model;\n            let apiParams = this.field.apiParams || [];\n            let params = {};\n            let finalApi = apiBase + this.field.action.api;\n            apiParams.forEach(param => {\n                params[param] = formModel[param];\n            });\n            let finalParams = Object.assign({}, params);\n            this.requestMethod(finalApi, finalParams).then(res => {\n                this.requestResolve(res);\n            }, reject => {\n                this.requestReject(reject);\n            });\n        },\n        requestResolve(res) {\n            if (+res.status === 0 || +res.errno === 0 || +res.status === 200) {\n                this.text = res.data.text;\n                this.loading = false;\n            }\n        },\n        requestReject(reject) {\n            // eslint-disable-next-line no-console\n            console.log(reject);\n        },\n        requestMethod(url, finalParams) {\n            if (this.requestInterceptor) {\n                return this.requestInterceptor(url, finalParams);\n            }\n            else if (this.FormGeneratorInstallOptions && this.FormGeneratorInstallOptions.requestInterceptor) {\n                return this.FormGeneratorInstallOptions.requestInterceptor(url, finalParams);\n            }\n            return axios.request({\n                url,\n                method: 'get',\n                params: finalParams\n            });\n        },\n    },\n};\n</script>\n"],"sourceRoot":"node_modules/form-generator-iview/src/fields"}]}