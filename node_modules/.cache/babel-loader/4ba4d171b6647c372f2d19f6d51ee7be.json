{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/eslint-loader/index.js??ref--13-0!/Users/apple/github/glsnb/glsblc/glsblc/src/libs/axios.js","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/src/libs/axios.js","mtime":1576581821232},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/eslint-loader/index.js","mtime":1575878144640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL1VzZXJzL2FwcGxlL2dpdGh1Yi9nbHNuYi9nbHNibGMvZ2xzYmxjL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2FwcGxlL2dpdGh1Yi9nbHNuYi9nbHNibGMvZ2xzYmxjL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CgovKioKICogQGZpbGUg6Lev5b6E6YWN572u6YWN572uCiAqIEBhdXRob3Igd2FuZ2JpbmcxMSh3YW5nYmluZzExQGJhaWR1LmNvbSkKICovCgovKiBlc2xpbnQtZGlzYWJsZSBuby1wYXJhbS1yZWFzc2lnbiAqLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwoKdmFyIEh0dHBSZXF1ZXN0ID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gSHR0cFJlcXVlc3QoKSB7CiAgICB2YXIgYmFzZVVybCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogIi8iOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBIdHRwUmVxdWVzdCk7CgogICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDsKICAgIHRoaXMucXVldWUgPSB7fTsKICB9CgogIF9jcmVhdGVDbGFzcyhIdHRwUmVxdWVzdCwgW3sKICAgIGtleTogImdldEluc2lkZUNvbmZpZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zaWRlQ29uZmlnKCkgewogICAgICB2YXIgY29uZmlnID0gewogICAgICAgIGJhc2VVUkw6IHRoaXMuYmFzZVVybCwKICAgICAgICBoZWFkZXJzOiB7Ly8KICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybiBjb25maWc7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW50ZXJjZXB0b3JzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbnRlcmNlcHRvcnMoaW5zdGFuY2UsIHVybCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8g6K+35rGC5oum5oiqCiAgICAgIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgX3RoaXMucXVldWVbdXJsXSA9IHRydWU7CiAgICAgICAgcmV0dXJuIGNvbmZpZzsKICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfSk7IC8vIOWTjeW6lOaLpuaIqgoKICAgICAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgcmV0dXJuIHJlcy5kYXRhOwogICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICB2YXIgZXJyb3JJbmZvID0gZXJyb3IucmVzcG9uc2U7CgogICAgICAgIGlmICghZXJyb3JJbmZvKSB7CiAgICAgICAgICB2YXIgX0pTT04kcGFyc2UgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVycm9yKSksCiAgICAgICAgICAgICAgX0pTT04kcGFyc2UkcmVxdWVzdCA9IF9KU09OJHBhcnNlLnJlcXVlc3QsCiAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9IF9KU09OJHBhcnNlJHJlcXVlc3Quc3RhdHVzVGV4dCwKICAgICAgICAgICAgICBzdGF0dXMgPSBfSlNPTiRwYXJzZSRyZXF1ZXN0LnN0YXR1cywKICAgICAgICAgICAgICBjb25maWcgPSBfSlNPTiRwYXJzZS5jb25maWc7CgogICAgICAgICAgZXJyb3JJbmZvID0gewogICAgICAgICAgICBzdGF0dXNUZXh0OiBzdGF0dXNUZXh0LAogICAgICAgICAgICBzdGF0dXM6IHN0YXR1cywKICAgICAgICAgICAgcmVxdWVzdDogewogICAgICAgICAgICAgIHJlc3BvbnNlVVJMOiBjb25maWcudXJsCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0KG9wdGlvbnMpIHsKICAgICAgdmFyIGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKCk7CiAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHRoaXMuZ2V0SW5zaWRlQ29uZmlnKCksIG9wdGlvbnMpOwogICAgICB0aGlzLmludGVyY2VwdG9ycyhpbnN0YW5jZSwgb3B0aW9ucy51cmwpOwogICAgICByZXR1cm4gaW5zdGFuY2Uob3B0aW9ucyk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSHR0cFJlcXVlc3Q7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IEh0dHBSZXF1ZXN0Ow=="},{"version":3,"sources":["/Users/apple/github/glsnb/glsblc/glsblc/src/libs/axios.js"],"names":["axios","HttpRequest","baseUrl","queue","config","baseURL","headers","instance","url","interceptors","request","use","error","Promise","reject","response","res","data","errorInfo","JSON","parse","stringify","statusText","status","responseURL","options","create","Object","assign","getInsideConfig"],"mappings":";;;;AAAA;;;;;AAKA;AACA,OAAOA,KAAP,MAAkB,OAAlB;;IAEMC,W;;;AACJ,yBAA2B;AAAA,QAAfC,OAAe,uEAAL,GAAK;;AAAA;;AACzB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,KAAL,GAAa,EAAb;AACD;;;;sCAEiB;AAChB,UAAMC,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE,KAAKH,OADD;AAEbI,QAAAA,OAAO,EAAE,CACP;AADO;AAFI,OAAf;AAMA,aAAOF,MAAP;AACD;;;iCAEYG,Q,EAAUC,G,EAAK;AAAA;;AAC1B;AACAD,MAAAA,QAAQ,CAACE,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACE,UAAAP,MAAM,EAAI;AACR,QAAA,KAAI,CAACD,KAAL,CAAWK,GAAX,IAAkB,IAAlB;AACA,eAAOJ,MAAP;AACD,OAJH,EAKE,UAAAQ,KAAK,EAAI;AACP,eAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,OAPH,EAF0B,CAW1B;;AACAL,MAAAA,QAAQ,CAACE,YAAT,CAAsBM,QAAtB,CAA+BJ,GAA/B,CACE,UAAAK,GAAG,EAAI;AACL,eAAOA,GAAG,CAACC,IAAX;AACD,OAHH,EAIE,UAAAL,KAAK,EAAI;AACP,YAAIM,SAAS,GAAGN,KAAK,CAACG,QAAtB;;AACA,YAAI,CAACG,SAAL,EAAgB;AAAA,4BAIVC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeT,KAAf,CAAX,CAJU;AAAA,gDAEZF,OAFY;AAAA,cAEDY,UAFC,uBAEDA,UAFC;AAAA,cAEWC,MAFX,uBAEWA,MAFX;AAAA,cAGZnB,MAHY,eAGZA,MAHY;;AAKdc,UAAAA,SAAS,GAAG;AACVI,YAAAA,UAAU,EAAVA,UADU;AAEVC,YAAAA,MAAM,EAANA,MAFU;AAGVb,YAAAA,OAAO,EAAE;AAAEc,cAAAA,WAAW,EAAEpB,MAAM,CAACI;AAAtB;AAHC,WAAZ;AAKD;;AACD,eAAOK,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,OAlBH;AAoBD;;;4BAEOa,O,EAAS;AACf,UAAMlB,QAAQ,GAAGP,KAAK,CAAC0B,MAAN,EAAjB;AACAD,MAAAA,OAAO,GAAGE,MAAM,CAACC,MAAP,CAAc,KAAKC,eAAL,EAAd,EAAsCJ,OAAtC,CAAV;AACA,WAAKhB,YAAL,CAAkBF,QAAlB,EAA4BkB,OAAO,CAACjB,GAApC;AACA,aAAOD,QAAQ,CAACkB,OAAD,CAAf;AACD;;;;;;AAEH,eAAexB,WAAf","sourcesContent":["/**\n * @file 路径配置配置\n * @author wangbing11(wangbing11@baidu.com)\n */\n\n/* eslint-disable no-param-reassign */\nimport axios from \"axios\";\n\nclass HttpRequest {\n  constructor(baseUrl = \"/\") {\n    this.baseUrl = baseUrl;\n    this.queue = {};\n  }\n\n  getInsideConfig() {\n    const config = {\n      baseURL: this.baseUrl,\n      headers: {\n        //\n      }\n    };\n    return config;\n  }\n\n  interceptors(instance, url) {\n    // 请求拦截\n    instance.interceptors.request.use(\n      config => {\n        this.queue[url] = true;\n        return config;\n      },\n      error => {\n        return Promise.reject(error);\n      }\n    );\n    // 响应拦截\n    instance.interceptors.response.use(\n      res => {\n        return res.data;\n      },\n      error => {\n        let errorInfo = error.response;\n        if (!errorInfo) {\n          const {\n            request: { statusText, status },\n            config\n          } = JSON.parse(JSON.stringify(error));\n          errorInfo = {\n            statusText,\n            status,\n            request: { responseURL: config.url }\n          };\n        }\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  request(options) {\n    const instance = axios.create();\n    options = Object.assign(this.getInsideConfig(), options);\n    this.interceptors(instance, options.url);\n    return instance(options);\n  }\n}\nexport default HttpRequest;\n"]}]}