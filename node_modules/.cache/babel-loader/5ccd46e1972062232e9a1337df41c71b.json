{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/data-vis-iview/src/charts/chartFunnel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/data-vis-iview/src/charts/chartFunnel.vue","mtime":1576069822427},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js","mtime":1575878146703},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvYXBwbGUvZ2l0aHViL2dsc25iL2dsc2JsYy9nbHNibGMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGVjaGFydHMgZnJvbSAnZWNoYXJ0cyc7CmltcG9ydCB0ZFRoZW1lIGZyb20gJy4vdGhlbWUuanNvbic7CmltcG9ydCB7IG9uLCBvZmYgfSBmcm9tICcuLi91dGlscy91dGlscyc7CmltcG9ydCBkYXRhR2V0dGVyIGZyb20gJy4uL21peGlucy9kYXRhR2V0dGVyJzsKaW1wb3J0IHsgY2xhc3NQcmlmaXggfSBmcm9tICcuLi91dGlscy9jb25zdCc7CmVjaGFydHMucmVnaXN0ZXJUaGVtZSgndGRUaGVtZScsIHRkVGhlbWUpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NoYXJ0RnVubmVsJywKICBtaXhpbnM6IFtkYXRhR2V0dGVyXSwKICBwcm9wczogewogICAgY2hhcnQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZG9tOiBudWxsLAogICAgICBjaGFydENvbHVtbnM6IFtdLAogICAgICBjaGFydERhdGE6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNsYXNzZXM6IGZ1bmN0aW9uIGNsYXNzZXMoKSB7CiAgICAgIHJldHVybiBbIiIuY29uY2F0KGNsYXNzUHJpZml4LCAiLWNoYXJ0IiksICIiLmNvbmNhdChjbGFzc1ByaWZpeCwgIi1jaGFydC1mdW5uZWwiKV07CiAgICB9LAogICAgZGlzcGxheUNsYXNzZXM6IGZ1bmN0aW9uIGRpc3BsYXlDbGFzc2VzKCkgewogICAgICByZXR1cm4gW19kZWZpbmVQcm9wZXJ0eSh7fSwgIiIuY29uY2F0KGNsYXNzUHJpZml4LCAiLWhpZGUiKSwgdGhpcy5sb2FkaW5nKV07CiAgICB9LAogICAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2hhcnQuYXBpID8gdGhpcy5jaGFydERhdGEgOiB0aGlzLmNoYXJ0LmRhdGE7CiAgICB9LAogICAgY29sdW1uczogZnVuY3Rpb24gY29sdW1ucygpIHsKICAgICAgdmFyIGNoYXJ0Q29sdW1ucyA9IHRoaXMuY2hhcnRDb2x1bW5zIHx8IFtdOwogICAgICB2YXIgY29sdW1ucyA9IHRoaXMuY2hhcnQuY29sdW1ucyB8fCBbXTsKICAgICAgcmV0dXJuIGNoYXJ0Q29sdW1ucy5sZW5ndGggPiAwID8gY2hhcnRDb2x1bW5zIDogY29sdW1uczsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMucmVuZGVyKCk7CiAgICB0aGlzLiR3YXRjaCgnY2hhcnQnLCBmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLnJlbmRlcigpOwogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgb2ZmKHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMucmVzaXplKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2l6ZTogZnVuY3Rpb24gcmVzaXplKCkgewogICAgICB0aGlzLmRvbSAmJiB0aGlzLmRvbS5yZXNpemUoKTsKICAgIH0sCiAgICBnZXREYXRhRmluaXNoZWQ6IGZ1bmN0aW9uIGdldERhdGFGaW5pc2hlZCgpIHsKICAgICAgdGhpcy5yZW5kZXIoKTsKICAgIH0sCiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIHRoaXMuZG9tICYmIHRoaXMuZG9tLmNsZWFyKCk7CiAgICAgIHRoaXMuZG9tID0gdGhpcy4kcmVmcy5kb20gJiYgZWNoYXJ0cy5pbml0KHRoaXMuJHJlZnMuZG9tLCAndGRUaGVtZScpOwoKICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgb3B0aW9uID0gewogICAgICAgIHRvb2xib3g6IHsKICAgICAgICAgIHRvcDogJy0xJScsCiAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgIGZlYXR1cmU6IHsKICAgICAgICAgICAgc2F2ZUFzSW1hZ2U6IHt9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICB0cmlnZ2VyOiAnaXRlbScsCiAgICAgICAgICBmb3JtYXR0ZXI6ICd7YX0gPGJyLz57Yn0gOiB7Y30lJwogICAgICAgIH0sCiAgICAgICAgZ3JpZDogewogICAgICAgICAgY29udGFpbkxhYmVsOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgIGRhdGE6IHRoaXMuY29sdW1ucwogICAgICAgIH0sCiAgICAgICAgY2FsY3VsYWJsZTogdHJ1ZSwKICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICBuYW1lOiB0aGlzLmNoYXJ0LmxhYmVsLAogICAgICAgICAgdHlwZTogJ2Z1bm5lbCcsCiAgICAgICAgICBtaW46IDAsCiAgICAgICAgICBtYXg6IDEwMCwKICAgICAgICAgIG1pblNpemU6ICcwJScsCiAgICAgICAgICBtYXhTaXplOiAnMTAwJScsCiAgICAgICAgICBzb3J0OiAnZGVzY2VuZGluZycsCiAgICAgICAgICBsYWJlbDogewogICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICBwb3NpdGlvbjogJ291c2lkZScsCiAgICAgICAgICAgIGZvcm1hdHRlcjogJ3tifToge2N9JScKICAgICAgICAgIH0sCiAgICAgICAgICBsYWJlbExpbmU6IHsKICAgICAgICAgICAgbGVuZ3RoOiAxMCwKICAgICAgICAgICAgbGluZVN0eWxlOiB7CiAgICAgICAgICAgICAgd2lkdGg6IDEsCiAgICAgICAgICAgICAgdHlwZTogJ3NvbGlkJwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZW1waGFzaXM6IHsKICAgICAgICAgICAgbGFiZWw6IHsKICAgICAgICAgICAgICBmb250U2l6ZTogMTQKICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIGRhdGE6IHRoaXMuZGF0YSwKICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiBmdW5jdGlvbiBhbmltYXRpb25EdXJhdGlvbihpZHgpIHsKICAgICAgICAgICAgLy8g6LaK5b6A5ZCO55qE5pWw5o2u5bu26L+f6LaK5aSnCiAgICAgICAgICAgIHJldHVybiBpZHggKiAxMDAwOwogICAgICAgICAgfQogICAgICAgIH1dCiAgICAgIH07CiAgICAgIHRoaXMuZG9tICYmIHRoaXMuZG9tLnNldE9wdGlvbihvcHRpb24pOwogICAgICBvbih3aW5kb3csICdyZXNpemUnLCB0aGlzLnJlc2l6ZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["chartFunnel.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div :class=\"[loadingClasses, classes, displayClasses]\">\n        <Spin\n            v-if=\"loading\"\n            :class=\"spinClasses\"\n            size=\"large\"\n        />\n        <div\n            ref=\"dom\"\n            :class=\"classes\"\n        />\n    </div>\n</template>\n\n<script>\nimport echarts from 'echarts';\nimport tdTheme from './theme.json';\nimport { on, off } from '../utils/utils';\nimport dataGetter from '../mixins/dataGetter';\nimport {classPrifix} from '../utils/const';\n\necharts.registerTheme('tdTheme', tdTheme);\n\nexport default {\n    name: 'ChartFunnel',\n    mixins: [dataGetter],\n    props: {\n        chart: {\n            type: Object,\n            default() {\n                return {};\n            }\n        }\n    },\n    data () {\n        return {\n            loading: false,\n            dom: null,\n            chartColumns: [],\n            chartData: []\n        };\n    },\n    computed: {\n        classes() {\n            return [\n                `${classPrifix}-chart`,\n                `${classPrifix}-chart-funnel`\n            ];\n        },\n        displayClasses() {\n            return [\n                {\n                    [`${classPrifix}-hide`]: this.loading,\n                }\n            ];\n        },\n        data() {\n            return this.chart.api ? this.chartData : this.chart.data;\n        },\n        columns() {\n            let chartColumns = this.chartColumns || [];\n            let columns = this.chart.columns || [];\n            return chartColumns.length > 0 ? chartColumns : columns;\n        }\n    },\n    mounted () {\n        this.render();\n        this.$watch('chart', () => {\n            this.render();\n        });\n    },\n    beforeDestroy () {\n        off(window, 'resize', this.resize);\n    },\n    methods: {\n        resize () {\n            this.dom && this.dom.resize();\n        },\n        getDataFinished() {\n            this.render();\n        },\n        render() {\n            const data = this.data;\n            this.dom && this.dom.clear();\n            this.dom = this.$refs.dom && echarts.init(this.$refs.dom, 'tdTheme');\n            if (data.length === 0) {\n                return;\n            }\n            let option = {\n                toolbox: {\n                    top: '-1%',\n                    right: '4%',\n                    feature: {\n                        saveAsImage: {}\n                    }\n                },\n                tooltip: {\n                    trigger: 'item',\n                    formatter: '{a} <br/>{b} : {c}%'\n                },\n                grid: {\n                    containLabel: true\n                },\n                legend: {\n                    data: this.columns\n                },\n                calculable: true,\n                series: [\n                    {\n                        name: this.chart.label,\n                        type: 'funnel',\n                        min: 0,\n                        max: 100,\n                        minSize: '0%',\n                        maxSize: '100%',\n                        sort: 'descending',\n                        label: {\n                            show: true,\n                            position: 'ouside',\n                            formatter: '{b}: {c}%'\n                        },\n                        labelLine: {\n                            length: 10,\n                            lineStyle: {\n                                width: 1,\n                                type: 'solid'\n                            }\n                        },\n                        emphasis: {\n                            label: {\n                                fontSize: 14\n                            }\n                        },\n                        data: this.data,\n                        animationDuration: function (idx) {\n                            // 越往后的数据延迟越大\n                            return idx * 1000;\n                        }\n                    }\n                ],\n            };\n            this.dom && this.dom.setOption(option);\n            on(window, 'resize', this.resize);\n        }\n    }\n};\n</script>\n"],"sourceRoot":"node_modules/data-vis-iview/src/charts"}]}