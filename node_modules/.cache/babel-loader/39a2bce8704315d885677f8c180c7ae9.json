{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldCheckbox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldCheckbox.vue","mtime":1576581289804},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGdldE9wdGlvbnMgZnJvbSAnLi4vbWl4aW5zL2dldE9wdGlvbnMnOwppbXBvcnQgeyBjbGFzc1ByaWZpeCB9IGZyb20gJy4uL3V0aWxzL2NvbnN0JzsKZXhwb3J0IGRlZmF1bHQgewogIGluamVjdDogWydmb3JtJ10sCiAgbWl4aW5zOiBbZ2V0T3B0aW9uc10sCiAgcHJvcHM6IHsKICAgIGZpZWxkOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBzaXplOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICdkZWZhdWx0JzsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBvcHRpb25zOiBbXSwKICAgICAgaW5kZXRlcm1pbmF0ZTogdHJ1ZSwKICAgICAgY2hlY2tBbGw6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNsYXNzZXM6IGZ1bmN0aW9uIGNsYXNzZXMoKSB7CiAgICAgIHJldHVybiAiIi5jb25jYXQoY2xhc3NQcmlmaXgsICItIikuY29uY2F0KHRoaXMuZmllbGQudHlwZS50b0xvd2VyQ2FzZSgpKTsKICAgIH0sCiAgICBjaGVja0FsbENsYXNzZXM6IGZ1bmN0aW9uIGNoZWNrQWxsQ2xhc3NlcygpIHsKICAgICAgcmV0dXJuICIiLmNvbmNhdCh0aGlzLmNsYXNzZXMsICItY2hlY2thbGwiKTsKICAgIH0sCiAgICBjb21wdXRlZE9wdGlvbnM6IGZ1bmN0aW9uIGNvbXB1dGVkT3B0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5sZW5ndGggPiAwID8gdGhpcy5vcHRpb25zIDogdGhpcy5maWVsZC5vcHRpb25zOwogICAgfSwKICAgIG9wdGlvbnNBcGk6IGZ1bmN0aW9uIG9wdGlvbnNBcGkoKSB7CiAgICAgIHJldHVybiAhQXJyYXkuaXNBcnJheSh0aGlzLmZpZWxkLm9wdGlvbnMpID8gdGhpcy5maWVsZC5vcHRpb25zIDogJyc7CiAgICB9LAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICByZXR1cm4gdGhpcy5mb3JtLm1vZGVsW3RoaXMuZmllbGQubW9kZWxdIHx8IFtdOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZSgpIHsKICAgICAgdmFyIF92YWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CgogICAgICB0aGlzLmNoZWNrQWxsR3JvdXBDaGFuZ2UoX3ZhbHVlKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHJlbW90ZU1ldGhvZDogZnVuY3Rpb24gcmVtb3RlTWV0aG9kKCkgewogICAgICBpZiAoIXRoaXMuZmllbGQuYXBpICYmICF0aGlzLm9wdGlvbnNBcGkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0UmVtb3RlT3B0aW9ucygpOwogICAgfSwKICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLmZpZWxkLmNoZWNrQWxsKSB7CiAgICAgICAgdGhpcy5jaGVja0FsbEdyb3VwQ2hhbmdlKHZhbHVlKTsKICAgICAgfQoKICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybS5tb2RlbCwgdGhpcy5maWVsZC5tb2RlbCwgdmFsdWUpOwogICAgICB0aGlzLiRlbWl0KCdvbi1jaGFuZ2UnLCB0aGlzLmZpZWxkLm1vZGVsLCB2YWx1ZSwgbnVsbCwgdGhpcy5maWVsZCk7CiAgICB9LAogICAgaGFuZGxlQ2hlY2tBbGw6IGZ1bmN0aW9uIGhhbmRsZUNoZWNrQWxsKCkgewogICAgICB2YXIgdmFsdWUgPSBbXTsKCiAgICAgIGlmICh0aGlzLmluZGV0ZXJtaW5hdGUpIHsKICAgICAgICB0aGlzLmNoZWNrQWxsID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaGVja0FsbCA9ICF0aGlzLmNoZWNrQWxsOwogICAgICB9CgogICAgICB0aGlzLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTsKCiAgICAgIGlmICh0aGlzLmNoZWNrQWxsKSB7CiAgICAgICAgdmFsdWUgPSB0aGlzLmNvbXB1dGVkT3B0aW9ucy5tYXAoZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgICAgcmV0dXJuIG9wdGlvbi52YWx1ZTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YWx1ZSA9IFtdOwogICAgICB9CgogICAgICB0aGlzLmhhbmRsZUNoYW5nZSh2YWx1ZSk7CiAgICB9LAogICAgY2hlY2tBbGxHcm91cENoYW5nZTogZnVuY3Rpb24gY2hlY2tBbGxHcm91cENoYW5nZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUubGVuZ3RoID09PSB0aGlzLmNvbXB1dGVkT3B0aW9ucy5sZW5ndGgpIHsKICAgICAgICB0aGlzLmluZGV0ZXJtaW5hdGUgPSBmYWxzZTsKICAgICAgICB0aGlzLmNoZWNrQWxsID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlID0gdHJ1ZTsKICAgICAgICB0aGlzLmNoZWNrQWxsID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlID0gZmFsc2U7CiAgICAgICAgdGhpcy5jaGVja0FsbCA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["fieldCheckbox.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <div\n            v-if=\"field.checkAll\"\n            :class=\"checkAllClasses\"\n        >\n            <Checkbox\n                :indeterminate=\"indeterminate\"\n                :value=\"checkAll\"\n                @click.prevent.native=\"handleCheckAll\"\n            >全选</Checkbox>\n        </div>\n        <CheckboxGroup\n            :value=\"form.model[field.model]\"\n            :size=\"size\"\n            @on-change=\"handleChange\"\n        >\n            <Checkbox\n                v-for=\"item in computedOptions\"\n                :key=\"item.value\"\n                :label=\"item.value\"\n                :disabled=\"item.disabled\"\n            >\n                {{ item.label }}\n            </Checkbox>\n        </CheckboxGroup>\n    </div>\n</template>\n<script>\nimport getOptions from '../mixins/getOptions';\nimport {classPrifix} from '../utils/const';\nexport default {\n    inject: ['form'],\n    mixins: [getOptions],\n    props: {\n        field: {\n            type: Object,\n            required: true\n        },\n        size: {\n            type: String,\n            default() {\n                return 'default';\n            }\n        },\n    },\n    data() {\n        return {\n            loading: false,\n            options: [],\n            indeterminate: true,\n            checkAll: false\n        };\n    },\n    computed: {\n        classes() {\n            return `${classPrifix}-${this.field.type.toLowerCase()}`;\n        },\n        checkAllClasses() {\n            return `${this.classes}-checkall`;\n        },\n        computedOptions() {\n            return this.options.length > 0 ? this.options : this.field.options;\n        },\n        optionsApi() {\n            return !Array.isArray(this.field.options) ? this.field.options : '';\n        },\n        value() {\n            return this.form.model[this.field.model] || [];\n        }\n    },\n    watch: {\n        value(value = []) {\n            this.checkAllGroupChange(value);\n        }\n    },\n    methods: {\n        remoteMethod() {\n            if (!this.field.api && !this.optionsApi) {\n                return;\n            }\n            this.getRemoteOptions();\n        },\n        handleChange(value) {\n            if (this.field.checkAll) {\n                this.checkAllGroupChange(value);\n            }\n            this.$set(this.form.model, this.field.model, value);\n            this.$emit('on-change', this.field.model, value, null, this.field);\n        },\n        handleCheckAll() {\n            let value = [];\n            if (this.indeterminate) {\n                this.checkAll = false;\n            } else {\n                this.checkAll = !this.checkAll;\n            }\n            this.indeterminate = false;\n\n            if (this.checkAll) {\n                value = this.computedOptions.map(option => option.value);\n            } else {\n                value = [];\n            }\n            this.handleChange(value);\n        },\n        checkAllGroupChange(value) {\n            if (value.length === this.computedOptions.length) {\n                this.indeterminate = false;\n                this.checkAll = true;\n            } else if (value.length > 0) {\n                this.indeterminate = true;\n                this.checkAll = false;\n            } else {\n                this.indeterminate = false;\n                this.checkAll = false;\n            }\n        }\n    }\n};\n</script>\n"],"sourceRoot":"node_modules/form-generator-iview/src/fields"}]}