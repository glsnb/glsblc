{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/src/page/data-report/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/src/page/data-report/index.vue","mtime":1576581821236},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICJAL2xpYnMvYXBpLnJlcXVlc3QiOwppbXBvcnQgc2VydmljZXMgZnJvbSAiQC9zZXJ2aWNlIjsKdmFyIGdldFBhZ2VDb25maWcgPSBzZXJ2aWNlc1siZGF0YS1yZXBvcnQiXS5nZXRQYWdlQ29uZmlnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vZGVsOiB7fSwKICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgcGFnZUNvbmZpZzogewogICAgICAgIGZvcm06IHt9LAogICAgICAgIGNoYXJ0czogW10KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmaWVsZHM6IGZ1bmN0aW9uIGZpZWxkcygpIHsKICAgICAgcmV0dXJuIHRoaXMucGFnZUNvbmZpZy5mb3JtLmZpZWxkcyB8fCBbXTsKICAgIH0sCiAgICBvcHRpb25zOiBmdW5jdGlvbiBvcHRpb25zKCkgewogICAgICB2YXIgb3B0aW9ucyA9IHRoaXMucGFnZUNvbmZpZy5mb3JtLm9wdGlvbnMgfHwgW107CiAgICAgIG9wdGlvbnMuYXBpQmFzZSA9IHRoaXMuYXBpQmFzZTsKICAgICAgb3B0aW9ucy5sYWJlbFdpZHRoID0gNjA7CiAgICAgIG9wdGlvbnMuaW5saW5lID0gdHJ1ZTsKICAgICAgb3B0aW9ucy5sYWJlbFBvc2l0aW9uID0gImxlZnQiOwogICAgICByZXR1cm4gb3B0aW9uczsKICAgIH0sCiAgICBjaGFydHM6IGZ1bmN0aW9uIGNoYXJ0cygpIHsKICAgICAgcmV0dXJuIHRoaXMucGFnZUNvbmZpZy5jaGFydHMgfHwgW107CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgcGFnZUlkID0gdGhpcy4kcm91dGUucGFyYW1zLnBhZ2VJZDsKICAgIGdldFBhZ2VDb25maWcoewogICAgICBwYWdlSWQ6IHBhZ2VJZAogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIF90aGlzLnBhZ2VDb25maWcgPSByZXMuZGF0YTsKICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbnRlcmNlcHRvcjogZnVuY3Rpb24gaW50ZXJjZXB0b3IodXJsLCBwYXJhbXMpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBheGlvcy5yZXF1ZXN0KHsKICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBjb25kaXRpb25zOiBKU09OLnN0cmluZ2lmeShwYXJhbXMpCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAoK3Jlcy5zdGF0dXMgPT09IDApIHsKICAgICAgICAgICAgcmVzb2x2ZShyZXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KHJlcyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,OAAA,KAAA,MAAA,oBAAA;AACA,OAAA,QAAA,MAAA,WAAA;IACA,a,GAAA,QAAA,CAAA,aAAA,C,CAAA,a;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,UAAA,EAAA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA;AAFA;AAHA,KAAA;AAQA,GAVA;AAWA,EAAA,QAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,aAAA,KAAA,UAAA,CAAA,IAAA,CAAA,MAAA,IAAA,EAAA;AACA,KAHA;AAIA,IAAA,OAJA,qBAIA;AACA,UAAA,OAAA,GAAA,KAAA,UAAA,CAAA,IAAA,CAAA,OAAA,IAAA,EAAA;AACA,MAAA,OAAA,CAAA,OAAA,GAAA,KAAA,OAAA;AACA,MAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,OAAA,CAAA,MAAA,GAAA,IAAA;AACA,MAAA,OAAA,CAAA,aAAA,GAAA,MAAA;AACA,aAAA,OAAA;AACA,KAXA;AAYA,IAAA,MAZA,oBAYA;AACA,aAAA,KAAA,UAAA,CAAA,MAAA,IAAA,EAAA;AACA;AAdA,GAXA;AA2BA,EAAA,OA3BA,qBA2BA;AAAA;;AAAA,QACA,MADA,GACA,KAAA,MAAA,CAAA,MADA,CACA,MADA;AAEA,IAAA,aAAA,CAAA;AACA,MAAA,MAAA,EAAA;AADA,KAAA,CAAA,CAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,KALA;AAMA,GAnCA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,GADA,EACA,MADA,EACA;AACA,aAAA,IAAA,OAAA,CAAA,UAAA,OAAA,EAAA,MAAA,EAAA;AACA,QAAA,KAAA,CACA,OADA,CACA;AACA,UAAA,GAAA,EAAA,GADA;AAEA,UAAA,MAAA,EAAA,KAFA;AAGA,UAAA,MAAA,EAAA;AACA,YAAA,UAAA,EAAA,IAAA,CAAA,SAAA,CAAA,MAAA;AADA;AAHA,SADA,EAQA,IARA,CASA,UAAA,GAAA,EAAA;AACA,cAAA,CAAA,GAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA;AACA,WAFA,MAEA;AACA,YAAA,MAAA,CAAA,GAAA,CAAA;AACA;AACA,SAfA,EAgBA,UAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA;AACA,SAlBA;AAoBA,OArBA,CAAA;AAsBA;AAxBA;AApCA,CAAA","sourcesContent":["<template>\n  <div class=\"page-data-report\">\n    <div v-if=\"loading\" class=\"page-data-report-loading\">\n      <Spin class=\"page-data-report-loading-spin\" size=\"large\" />\n    </div>\n    <div v-else>\n      <FormGenerator\n        v-if=\"fields.length > 0\"\n        ref=\"FormGenerator\"\n        class=\"page-data-report-conditions\"\n        :fields=\"fields\"\n        :model=\"model\"\n        :options=\"options\"\n      />\n      <div v-if=\"charts.length > 0\">\n        <div v-if=\"charts.length > 0\">\n          <DataVis\n            v-for=\"(item, index) in charts\"\n            :key=\"index\"\n            ref=\"DataVis\"\n            :config=\"item\"\n            class=\"data-vis\"\n            :params-container=\"model\"\n            :request-interceptor=\"interceptor\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"@/libs/api.request\";\nimport services from \"@/service\";\nconst { getPageConfig } = services[\"data-report\"];\nexport default {\n  data() {\n    return {\n      model: {},\n      loading: true,\n      pageConfig: {\n        form: {},\n        charts: []\n      }\n    };\n  },\n  computed: {\n    fields() {\n      return this.pageConfig.form.fields || [];\n    },\n    options() {\n      const options = this.pageConfig.form.options || [];\n      options.apiBase = this.apiBase;\n      options.labelWidth = 60;\n      options.inline = true;\n      options.labelPosition = \"left\";\n      return options;\n    },\n    charts() {\n      return this.pageConfig.charts || [];\n    }\n  },\n  mounted() {\n    const { pageId } = this.$route.params;\n    getPageConfig({\n      pageId\n    }).then(res => {\n      this.pageConfig = res.data;\n      this.loading = false;\n    });\n  },\n  methods: {\n    interceptor(url, params) {\n      return new Promise((resolve, reject) => {\n        axios\n          .request({\n            url,\n            method: \"get\",\n            params: {\n              conditions: JSON.stringify(params)\n            }\n          })\n          .then(\n            res => {\n              if (+res.status === 0) {\n                resolve(res);\n              } else {\n                reject(res);\n              }\n            },\n            error => {\n              reject(error);\n            }\n          );\n      });\n    }\n  }\n};\n</script>\n<style lang=\"less\">\n.page-data-report {\n  &-loading {\n    text-align: center;\n    padding: 140px;\n    &-spin {\n      display: inline-block;\n    }\n  }\n\n  .dvis-ivu {\n    margin-bottom: 0px;\n    &-header {\n      font-size: 14px;\n      margin-top: 0px;\n      margin-left: 10px;\n    }\n\n    > .ivu-divider-horizontal {\n      margin: 1px 0;\n    }\n    .dvis-ivu-row .dvis-ivu-items-box {\n      display: flex;\n      justify-content: space-around;\n    }\n    .dvis-ivu-row .dvis-ivu-items-box .dvis-ivu-item .ivu-card-body {\n      .ivu-table-body {\n        height: 304px;\n        overflow: scroll;\n      }\n    }\n    .dvis-ivu-row .dvis-ivu-items-box .dvis-ivu-item {\n      .dvis-ivu-chart-inline-items-box .dvis-ivu-chart-inline-item-box {\n        width: 31.2%;\n      }\n    }\n  }\n\n  &-conditions {\n    width: 98%;\n    background: #fff;\n    margin: 10px;\n    padding: 20px 20px 0px 20px;\n    border-radius: 10px;\n\n    .fg-ivu-form-item {\n      margin-right: 40px !important;\n    }\n  }\n\n  &-chart {\n    margin-top: 60px;\n    padding: 20px;\n    background: #fff;\n  }\n}\n</style>\n"],"sourceRoot":"src/page/data-report"}]}