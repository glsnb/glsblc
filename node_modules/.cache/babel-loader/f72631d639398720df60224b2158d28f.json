{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/eslint-loader/index.js??ref--13-0!/Users/apple/github/glsnb/glsblc/glsblc/src/store/module/user.js","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/src/store/module/user.js","mtime":1576581821242},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js","mtime":1575878146703},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/eslint-loader/index.js","mtime":1575878144640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CgovKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi8KCi8qIGVzbGludC1kaXNhYmxlIG5vLXBhcmFtLXJlYXNzaWduICovCmltcG9ydCBzZXJ2aWNlcyBmcm9tICJAL3NlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHsKICAgIHVzZXJOYW1lOiAiIiwKICAgIHVzZXJBdmF0YXI6ICIiLAogICAgZGVwYXJ0bWVudE5hbWU6ICIiCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldEF2YXRhcjogZnVuY3Rpb24gc2V0QXZhdGFyKHN0YXRlLCB1c2VyQXZhdGFyKSB7CiAgICAgIHN0YXRlLnVzZXJBdmF0YXIgPSB1c2VyQXZhdGFyOwogICAgfSwKICAgIHNldFVzZXJOYW1lOiBmdW5jdGlvbiBzZXRVc2VyTmFtZShzdGF0ZSwgdXNlck5hbWUpIHsKICAgICAgc3RhdGUudXNlck5hbWUgPSB1c2VyTmFtZTsKICAgIH0sCiAgICBzZXREZXBhcnRtZW50TmFtZTogZnVuY3Rpb24gc2V0RGVwYXJ0bWVudE5hbWUoc3RhdGUsIGRlcGFydG1lbnROYW1lKSB7CiAgICAgIHN0YXRlLmRlcGFydG1lbnROYW1lID0gZGVwYXJ0bWVudE5hbWU7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvLyDojrflj5bnlKjmiLfnm7jlhbPkv6Hmga8KICAgIGdldFVzZXJJbmZvOiBmdW5jdGlvbiBnZXRVc2VySW5mbyhfcmVmKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB0cnkgewogICAgICAgICAgc2VydmljZXMuZ2V0VXNlckluZm8oKS50aGVuKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgICAgICB2YXIgc3RhdHVzID0gX3JlZjIuc3RhdHVzLAogICAgICAgICAgICAgICAgZGF0YSA9IF9yZWYyLmRhdGE7CgogICAgICAgICAgICBpZiAoK3N0YXR1cyA9PT0gMjAwIHx8ICtzdGF0dXMgPT09IDApIHsKICAgICAgICAgICAgICBjb21taXQoInNldERlcGFydG1lbnROYW1lIiwgZGF0YS5kZXBhcnRtZW50TmFtZSk7CiAgICAgICAgICAgICAgY29tbWl0KCJzZXRBdmF0YXIiLCBkYXRhLmhlYWRVcmwpOwogICAgICAgICAgICAgIGNvbW1pdCgic2V0VXNlck5hbWUiLCBkYXRhLnVzZXJOYW1lKTsKICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoInJlc3BvbnNlIHN0YXR1cyBpczogIi5jb25jYXQoc3RhdHVzKSkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/apple/github/glsnb/glsblc/glsblc/src/store/module/user.js"],"names":["services","state","userName","userAvatar","departmentName","mutations","setAvatar","setUserName","setDepartmentName","actions","getUserInfo","commit","Promise","resolve","reject","then","status","data","headUrl","Error","catch","err","error"],"mappings":";;AAAA;;AACA;AACA,OAAOA,QAAP,MAAqB,WAArB;AAEA,eAAe;AACbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE,EADL;AAELC,IAAAA,UAAU,EAAE,EAFP;AAGLC,IAAAA,cAAc,EAAE;AAHX,GADM;AAMbC,EAAAA,SAAS,EAAE;AACTC,IAAAA,SADS,qBACCL,KADD,EACQE,UADR,EACoB;AAC3BF,MAAAA,KAAK,CAACE,UAAN,GAAmBA,UAAnB;AACD,KAHQ;AAITI,IAAAA,WAJS,uBAIGN,KAJH,EAIUC,QAJV,EAIoB;AAC3BD,MAAAA,KAAK,CAACC,QAAN,GAAiBA,QAAjB;AACD,KANQ;AAOTM,IAAAA,iBAPS,6BAOSP,KAPT,EAOgBG,cAPhB,EAOgC;AACvCH,MAAAA,KAAK,CAACG,cAAN,GAAuBA,cAAvB;AACD;AATQ,GANE;AAiBbK,EAAAA,OAAO,EAAE;AACP;AACAC,IAAAA,WAFO,6BAEiB;AAAA,UAAVC,MAAU,QAAVA,MAAU;AACtB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,YAAI;AACFd,UAAAA,QAAQ,CACLU,WADH,GAEGK,IAFH,CAEQ,iBAAsB;AAAA,gBAAnBC,MAAmB,SAAnBA,MAAmB;AAAA,gBAAXC,IAAW,SAAXA,IAAW;;AAC1B,gBAAI,CAACD,MAAD,KAAY,GAAZ,IAAmB,CAACA,MAAD,KAAY,CAAnC,EAAsC;AACpCL,cAAAA,MAAM,CAAC,mBAAD,EAAsBM,IAAI,CAACb,cAA3B,CAAN;AACAO,cAAAA,MAAM,CAAC,WAAD,EAAcM,IAAI,CAACC,OAAnB,CAAN;AACAP,cAAAA,MAAM,CAAC,aAAD,EAAgBM,IAAI,CAACf,QAArB,CAAN;AACAW,cAAAA,OAAO,CAACI,IAAD,CAAP;AACD,aALD,MAKO;AACLH,cAAAA,MAAM,CAAC,IAAIK,KAAJ,+BAAiCH,MAAjC,EAAD,CAAN;AACD;AACF,WAXH,EAYGI,KAZH,CAYS,UAAAC,GAAG,EAAI;AACZP,YAAAA,MAAM,CAACO,GAAD,CAAN;AACD,WAdH;AAeD,SAhBD,CAgBE,OAAOC,KAAP,EAAc;AACdR,UAAAA,MAAM,CAACQ,KAAD,CAAN;AACD;AACF,OApBM,CAAP;AAqBD;AAxBM;AAjBI,CAAf","sourcesContent":["/* eslint-disable camelcase */\n/* eslint-disable no-param-reassign */\nimport services from \"@/service\";\n\nexport default {\n  state: {\n    userName: \"\",\n    userAvatar: \"\",\n    departmentName: \"\"\n  },\n  mutations: {\n    setAvatar(state, userAvatar) {\n      state.userAvatar = userAvatar;\n    },\n    setUserName(state, userName) {\n      state.userName = userName;\n    },\n    setDepartmentName(state, departmentName) {\n      state.departmentName = departmentName;\n    }\n  },\n  actions: {\n    // 获取用户相关信息\n    getUserInfo({ commit }) {\n      return new Promise((resolve, reject) => {\n        try {\n          services\n            .getUserInfo()\n            .then(({ status, data }) => {\n              if (+status === 200 || +status === 0) {\n                commit(\"setDepartmentName\", data.departmentName);\n                commit(\"setAvatar\", data.headUrl);\n                commit(\"setUserName\", data.userName);\n                resolve(data);\n              } else {\n                reject(new Error(`response status is: ${status}`));\n              }\n            })\n            .catch(err => {\n              reject(err);\n            });\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n  }\n};\n"]}]}