{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldUpload.vue","mtime":1576581289804},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js","mtime":1575878146703},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgaW5qZWN0OiBbJ2Zvcm0nXSwKICBwcm9wczogewogICAgZmllbGQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHNpemU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gJ2RlZmF1bHQnOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVmYXVsdEZpbGVMaXN0OiBbXSwKICAgICAgdXBsb2FkRmlsZUxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgdXBsb2FkZXI6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdGlwOiBmdW5jdGlvbiB0aXAoKSB7CiAgICAgIHJldHVybiB0aGlzLmZpZWxkLnRpcCB8fCAn54K55Ye75oiW6ICF5ouW5ou95paH5Lu25Y2z5Y+v5LiK5LygJzsKICAgIH0sCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZm9ybS5tb2RlbFt0aGlzLmZpZWxkLm1vZGVsXSB8fCBbXTsKICAgICAgcmV0dXJuIHZhbHVlLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW0uc3RhdHVzID0gJ2ZpbmlzaGVkJzsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKF92YWx1ZSkgewogICAgICB0aGlzLnVwbG9hZEZpbGVMaXN0ID0gX3ZhbHVlOwoKICAgICAgaWYgKHRoaXMudXBsb2FkZXIpIHsKICAgICAgICB0aGlzLnVwbG9hZGVyLmZpbGVMaXN0ID0gdGhpcy51cGxvYWRGaWxlTGlzdDsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMudXBsb2FkZXIgPSB0aGlzLiRyZWZzLnVwbG9hZCB8fCB0aGlzLiRyZWZzLm1lZGlhVXBsb2FkLiRyZWZzLnVwbG9hZDsKICAgIHRoaXMudXBsb2FkZXIuZmlsZUxpc3QgPSB0aGlzLnZhbHVlOwogICAgdGhpcy51cGxvYWRGaWxlTGlzdCA9IHRoaXMudXBsb2FkZXIuZmlsZUxpc3Q7IC8vIHRoaXMudXBsb2FkZXIuZmlsZUxpc3QgPSB0aGlzLnVwbG9hZEZpbGVMaXN0OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2UoKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm0ubW9kZWwsIHRoaXMuZmllbGQubW9kZWwsIHRoaXMudXBsb2FkRmlsZUxpc3QpOwogICAgICB0aGlzLiRlbWl0KCdvbi1jaGFuZ2UnLCB0aGlzLmZpZWxkLm1vZGVsLCB0aGlzLnVwbG9hZEZpbGVMaXN0LCBudWxsLCB0aGlzLmZpZWxkKTsKICAgIH0sCiAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcyhfcmVmLCBmaWxlKSB7CiAgICAgIHZhciBfcmVmJGRhdGEgPSBfcmVmLmRhdGEsCiAgICAgICAgICBkYXRhID0gX3JlZiRkYXRhID09PSB2b2lkIDAgPyB7fSA6IF9yZWYkZGF0YTsKICAgICAgdmFyIHVybCA9IGRhdGEudXJsOwoKICAgICAgaWYgKHVybCkgewogICAgICAgIHRoaXMuJE1lc3NhZ2UuaW5mbygn5LiK5Lyg5oiQ5YqfIScpOwogICAgICAgIGZpbGUudXJsID0gdXJsOwogICAgICAgIHRoaXMudXBsb2FkRmlsZUxpc3QgPSB0aGlzLnVwbG9hZGVyLmZpbGVMaXN0LnNsaWNlKCk7CiAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCfkuIrkvKDlpLHotKUhJyk7CiAgICAgIH0KICAgIH0sCiAgICBvbkZvcm1hdEVycm9yOiBmdW5jdGlvbiBvbkZvcm1hdEVycm9yKCkgewogICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHsKICAgICAgICBjb250ZW50OiAiXHU0RTBBXHU0RjIwXHU2NTg3XHU0RUY2XHU2ODNDXHU1RjBGXHU5NzAwXHU0RTNBOiIuY29uY2F0KHRoaXMuZmllbGQuYWNjZXB0LCAiLFx1NEUxNFx1NTQwRVx1N0YwMFx1NTQwRFx1NEUzQToiKS5jb25jYXQodGhpcy5maWVsZC5mb3JtYXQpLAogICAgICAgIGR1cmF0aW9uOiAyCiAgICAgIH0pOwogICAgfSwKICAgIG9uRXhjZWVkZWRTaXplOiBmdW5jdGlvbiBvbkV4Y2VlZGVkU2l6ZSgpIHsKICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcih7CiAgICAgICAgY29udGVudDogIlx1NEUwQVx1NEYyMFx1NjU4N1x1NEVGNlx1NTkyN1x1NUMwRlx1NEUwRFx1ODBGRFx1OEQ4NVx1OEZDNzoiLmNvbmNhdCh0aGlzLmZpZWxkLm1heFNpemUgLyAxMDI0LCAiTUIiKSwKICAgICAgICBkdXJhdGlvbjogMgogICAgICB9KTsKICAgIH0sCiAgICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7CiAgICAgIHRoaXMudXBsb2FkRmlsZUxpc3QgPSB0aGlzLnVwbG9hZGVyLmZpbGVMaXN0LnNsaWNlKCk7CiAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["fieldUpload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <Upload\n        ref=\"upload\"\n        :action=\"field.action\"\n        :headers=\"field.headers\"\n        :multiple=\"field.multiple\"\n        :paste=\"field.paste\"\n        :disabled=\"field.disabled\"\n        :data=\"field.data\"\n        :name=\"field.name\"\n        :with-credentials=\"field.withCredentials\"\n        :show-upload-list=\"field.showUploadList\"\n        :type=\"field.subtype\"\n        :accept=\"field.accept\"\n        :format=\"field.format\"\n        :max-size=\"field.maxSize\"\n        :default-file-list=\"[]\"\n        :on-format-error=\"onFormatError\"\n        :on-exceeded-size=\"onExceededSize\"\n        :on-success=\"onSuccess\"\n        :on-remove=\"onRemove\"\n        :size=\"size\"\n    >\n        <Icon\n            type=\"ios-cloud-upload\"\n            size=\"52\"\n            style=\"color: #3399ff\"\n        />\n        <p v-html=\"tip\" />\n    </Upload>\n</template>\n<script>\n\nexport default {\n    inject: ['form'],\n    props: {\n        field: {\n            type: Object,\n            required: true\n        },\n        size: {\n            type: String,\n            default() {\n                return 'default';\n            }\n        },\n    },\n    data() {\n        return {\n            defaultFileList: [],\n            uploadFileList: [],\n            loading: false,\n            uploader: null\n        };\n    },\n    computed: {\n        tip() {\n            return this.field.tip || '点击或者拖拽文件即可上传';\n        },\n        value() {\n            let value = this.form.model[this.field.model] || [];\n            return value.map(item => {\n                item.status = 'finished';\n                return item;\n            });\n        }\n    },\n    watch: {\n        value(value) {\n            this.uploadFileList = value;\n            if (this.uploader) {\n                this.uploader.fileList = this.uploadFileList;\n            }\n        },\n    },\n    mounted() {\n        this.uploader = this.$refs.upload || this.$refs.mediaUpload.$refs.upload;\n        this.uploader.fileList = this.value;\n        this.uploadFileList = this.uploader.fileList;\n        // this.uploader.fileList = this.uploadFileList;\n    },\n    methods: {\n        handleChange() {\n            this.$set(this.form.model, this.field.model, this.uploadFileList);\n            this.$emit('on-change', this.field.model, this.uploadFileList, null, this.field);\n        },\n        onSuccess({data = {}}, file) {\n            const {url} = data;\n            if (url) {\n                this.$Message.info('上传成功!');\n                file.url = url;\n                this.uploadFileList = this.uploader.fileList.slice();\n                this.handleChange();\n            }\n            else {\n                this.$Message.error('上传失败!');\n            }\n        },\n        onFormatError() {\n            this.$Message.error({\n                content: `上传文件格式需为:${this.field.accept},且后缀名为:${this.field.format}`,\n                duration: 2,\n            });\n        },\n        onExceededSize() {\n            this.$Message.error({\n                content: `上传文件大小不能超过:${this.field.maxSize / 1024}MB`,\n                duration: 2,\n            });\n        },\n        onRemove() {\n            this.uploadFileList = this.uploader.fileList.slice();\n            this.handleChange();\n        }\n    }\n};\n</script>\n"],"sourceRoot":"node_modules/form-generator-iview/src/fields"}]}