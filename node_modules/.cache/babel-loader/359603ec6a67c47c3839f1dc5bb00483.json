{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/eslint-loader/index.js??ref--13-0!/Users/apple/github/glsnb/glsblc/glsblc/src/service/index.js","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/src/service/index.js","mtime":1576581821233},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/eslint-loader/index.js","mtime":1575878144640}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy9hcHBsZS9naXRodWIvZ2xzbmIvZ2xzYmxjL2dsc2JsYy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKaW1wb3J0IGF4aW9zIGZyb20gIi4uL2xpYnMvYXBpLnJlcXVlc3QiOwpleHBvcnQgZGVmYXVsdCBPYmplY3QuYXNzaWduKHt9LCBnZXRBcHBTZXJ2aWNlcygpLCBnZXRNb2R1bGVTZXJ2aWNlcygpKTsKLyoqCiAqIEBkZXNjIGdldCBzZXJ2aWNlcyBmb3IgdGhlIGxheW91dCwgbGlrZSBtZW51bGlzdCwgdXNlckluZm8gYW5kIGV0Yy4KICogQHJldHVybiB7T2JqZWN0fSB0aGUgc3RydWN0dXJlIGlzIGxpa2U6CiAqIHsKICogICBtZW51bGlzdDogKCkgPT4ge30sCiAqICAgdXNlckluZm86ICgpID0+IHt9CiAqIH0KICoKICovCgpmdW5jdGlvbiBnZXRBcHBTZXJ2aWNlcygpIHsKICB2YXIgYXBwU2VydmljZXMgPSByZXF1aXJlKCIuL21vZHVsZS9hcHAiKS5kZWZhdWx0OwoKICB2YXIgdXNlclNlcnZpY2VzID0gcmVxdWlyZSgiLi9tb2R1bGUvdXNlciIpLmRlZmF1bHQ7CgogIHZhciBzZXJ2aWNlc0NvbmZpZyA9IF9vYmplY3RTcHJlYWQoe30sIGFwcFNlcnZpY2VzLCB7fSwgdXNlclNlcnZpY2VzKTsKCiAgdmFyIHNlcnZpY2VzID0ge307CiAgT2JqZWN0LmtleXMoc2VydmljZXNDb25maWcpLmZvckVhY2goZnVuY3Rpb24gKHNlcnZpY2UpIHsKICAgIHNlcnZpY2VzW3NlcnZpY2VdID0gZ2VuZXJhdGVTZXJ2aWNlKHNlcnZpY2VzQ29uZmlnW3NlcnZpY2VdKTsKICB9KTsKICByZXR1cm4gc2VydmljZXM7Cn0KLyoqCiAqIEBkZXNjIGdldCBzZXJ2aWNlcyBmb3IgdGhlIG1vZHVsZXMgZnJvbSB0ZW1wYXRlcy4KICogQHJldHVybiB7T2JqZWN0fSB0aGUgc3RydWN0dXJlIGlzIGxpa2U6CiAqIHsKICogICBtb2R1bGVOYW1lMTogewogKiAgICAgc2VydmljZTE6ICgpID0+IHt9LAogKiAgICAgc2VydmljZTI6ICgpID0+IHt9CiAqICAgfSwKICogICBtb2R1bGVOYW1lMjogewogKiAgICAgc2VydmljZTE6ICgpID0+IHt9LAogKiAgICAgc2VydmljZTI6ICgpID0+IHt9CiAqICAgfQogKiB9CiAqCiAqLwoKCmZ1bmN0aW9uIGdldE1vZHVsZVNlcnZpY2VzKCkgewogIHZhciB0ZW1wbGF0ZVNlcnZpY2VDb250ZXh0ID0gcmVxdWlyZS5jb250ZXh0KCIuLi9wYWdlIiwgdHJ1ZSwgL3NlcnZpY2VcLmpzJC8pOwoKICB2YXIgc2VydmljZXMgPSB7fTsKICB0ZW1wbGF0ZVNlcnZpY2VDb250ZXh0LmtleXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgIHZhciBtb2R1bGVOYW1lID0gL15cLlwvKC4rKVwvc2VydmljZS5qcyQvLmV4ZWMoa2V5KVsxXTsKICAgIHNlcnZpY2VzW21vZHVsZU5hbWVdID0ge307CiAgICB2YXIgY29udGV4dE9iaiA9IHRlbXBsYXRlU2VydmljZUNvbnRleHQoa2V5KS5kZWZhdWx0OwogICAgT2JqZWN0LmtleXMoY29udGV4dE9iaikuZm9yRWFjaChmdW5jdGlvbiAoc2VydmljZSkgewogICAgICBzZXJ2aWNlc1ttb2R1bGVOYW1lXVtzZXJ2aWNlXSA9IGdlbmVyYXRlU2VydmljZShjb250ZXh0T2JqW3NlcnZpY2VdKTsKICAgIH0pOwogIH0pOwogIHJldHVybiBzZXJ2aWNlczsKfQovKioKICogQGRlc2MgZ2VybmFyYXRlIGEgQVBJIHNlcnZpY2UgdXNpbmcgYXhpb3MKICogQHBhcmFtIHtGdW5jdGlvbn0gc2VydmljZURlY2xhcmF0aW9uIHRoZSBmdW5jdGlvbiBkZWNsYXJlZCBpbiBzZXJ2aWNlIGRpciB3aGljaCByZXR1cm4gYSBjb25maWcgb2YgdGhlIHNlcnZpY2UKICogQHJldHVybiB7RnVuY3Rpb259IHRoZSBmaW5hbCBzZXJ2aWNlCiAqLwoKCmZ1bmN0aW9uIGdlbmVyYXRlU2VydmljZShzZXJ2aWNlRGVjbGFyYXRpb24pIHsKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgdmFyIHBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICByZXR1cm4gYXhpb3MucmVxdWVzdChzZXJ2aWNlRGVjbGFyYXRpb24ocGFyYW1zKSk7CiAgfTsKfQ=="},{"version":3,"sources":["/Users/apple/github/glsnb/glsblc/glsblc/src/service/index.js"],"names":["axios","Object","assign","getAppServices","getModuleServices","appServices","require","default","userServices","servicesConfig","services","keys","forEach","service","generateService","templateServiceContext","context","key","moduleName","exec","contextObj","serviceDeclaration","params","request"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,qBAAlB;AAEA,eAAeC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBC,cAAc,EAAhC,EAAoCC,iBAAiB,EAArD,CAAf;AAEA;;;;;;;;;;AASA,SAASD,cAAT,GAA0B;AACxB,MAAME,WAAW,GAAGC,OAAO,CAAC,cAAD,CAAP,CAAwBC,OAA5C;;AACA,MAAMC,YAAY,GAAGF,OAAO,CAAC,eAAD,CAAP,CAAyBC,OAA9C;;AAEA,MAAME,cAAc,qBACfJ,WADe,MAEfG,YAFe,CAApB;;AAKA,MAAIE,QAAQ,GAAG,EAAf;AAEAT,EAAAA,MAAM,CAACU,IAAP,CAAYF,cAAZ,EAA4BG,OAA5B,CAAoC,UAAAC,OAAO,EAAI;AAC7CH,IAAAA,QAAQ,CAACG,OAAD,CAAR,GAAoBC,eAAe,CAACL,cAAc,CAACI,OAAD,CAAf,CAAnC;AACD,GAFD;AAGA,SAAOH,QAAP;AACD;AAED;;;;;;;;;;;;;;;;;AAeA,SAASN,iBAAT,GAA6B;AAC3B,MAAMW,sBAAsB,GAAGT,OAAO,CAACU,OAAR,CAC7B,SAD6B,EAE7B,IAF6B,EAG7B,cAH6B,CAA/B;;AAKA,MAAMN,QAAQ,GAAG,EAAjB;AAEAK,EAAAA,sBAAsB,CAACJ,IAAvB,GAA8BC,OAA9B,CAAsC,UAAAK,GAAG,EAAI;AAC3C,QAAMC,UAAU,GAAG,yBAAyBC,IAAzB,CAA8BF,GAA9B,EAAmC,CAAnC,CAAnB;AACAP,IAAAA,QAAQ,CAACQ,UAAD,CAAR,GAAuB,EAAvB;AACA,QAAME,UAAU,GAAGL,sBAAsB,CAACE,GAAD,CAAtB,CAA4BV,OAA/C;AACAN,IAAAA,MAAM,CAACU,IAAP,CAAYS,UAAZ,EAAwBR,OAAxB,CAAgC,UAAAC,OAAO,EAAI;AACzCH,MAAAA,QAAQ,CAACQ,UAAD,CAAR,CAAqBL,OAArB,IAAgCC,eAAe,CAACM,UAAU,CAACP,OAAD,CAAX,CAA/C;AACD,KAFD;AAGD,GAPD;AAQA,SAAOH,QAAP;AACD;AAED;;;;;;;AAKA,SAASI,eAAT,CAAyBO,kBAAzB,EAA6C;AAC3C,SAAO,YAAiB;AAAA,QAAhBC,MAAgB,uEAAP,EAAO;AACtB,WAAOtB,KAAK,CAACuB,OAAN,CAAcF,kBAAkB,CAACC,MAAD,CAAhC,CAAP;AACD,GAFD;AAGD","sourcesContent":["import axios from \"../libs/api.request\";\n\nexport default Object.assign({}, getAppServices(), getModuleServices());\n\n/**\n * @desc get services for the layout, like menulist, userInfo and etc.\n * @return {Object} the structure is like:\n * {\n *   menulist: () => {},\n *   userInfo: () => {}\n * }\n *\n */\nfunction getAppServices() {\n  const appServices = require(\"./module/app\").default;\n  const userServices = require(\"./module/user\").default;\n\n  const servicesConfig = {\n    ...appServices,\n    ...userServices\n  };\n\n  let services = {};\n\n  Object.keys(servicesConfig).forEach(service => {\n    services[service] = generateService(servicesConfig[service]);\n  });\n  return services;\n}\n\n/**\n * @desc get services for the modules from tempates.\n * @return {Object} the structure is like:\n * {\n *   moduleName1: {\n *     service1: () => {},\n *     service2: () => {}\n *   },\n *   moduleName2: {\n *     service1: () => {},\n *     service2: () => {}\n *   }\n * }\n *\n */\nfunction getModuleServices() {\n  const templateServiceContext = require.context(\n    \"../page\",\n    true,\n    /service\\.js$/\n  );\n  const services = {};\n\n  templateServiceContext.keys().forEach(key => {\n    const moduleName = /^\\.\\/(.+)\\/service.js$/.exec(key)[1];\n    services[moduleName] = {};\n    const contextObj = templateServiceContext(key).default;\n    Object.keys(contextObj).forEach(service => {\n      services[moduleName][service] = generateService(contextObj[service]);\n    });\n  });\n  return services;\n}\n\n/**\n * @desc gernarate a API service using axios\n * @param {Function} serviceDeclaration the function declared in service dir which return a config of the service\n * @return {Function} the final service\n */\nfunction generateService(serviceDeclaration) {\n  return (params = {}) => {\n    return axios.request(serviceDeclaration(params));\n  };\n}\n"]}]}