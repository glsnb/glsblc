{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldLogicInput.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldLogicInput.vue","mtime":1576581289804},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js","mtime":1575878146703},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bG9naWNJbnB1dE1hcH0gZnJvbSAnLi4vdXRpbHMvY29uc3QnOwppbXBvcnQge2NsYXNzUHJpZml4fSBmcm9tICcuLi91dGlscy9jb25zdCc7CmV4cG9ydCBkZWZhdWx0IHsKICAgIGluamVjdDogWydmb3JtJ10sCiAgICBwcm9wczogewogICAgICAgIGZpZWxkOiB7CiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB9LAogICAgICAgIHNpemU6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuICdkZWZhdWx0JzsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzdGFydDogJycsCiAgICAgICAgICAgIGVuZDogJycsCiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmZvcm0ubW9kZWxbdGhpcy5maWVsZC5tb2RlbF0gfHwge2xvZ2ljOiAnPScsIHZhbHVlOiAnJ30KICAgICAgICB9OwogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgY2xhc3NlcygpIHsKICAgICAgICAgICAgcmV0dXJuIGAke2NsYXNzUHJpZml4fS0ke3RoaXMuZmllbGQudHlwZS50b0xvd2VyQ2FzZSgpfWA7CiAgICAgICAgfSwKICAgICAgICBsb2dpY1NlbGVjdENsYXNzZXNzKCkgewogICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5jbGFzc2VzfS1sb2dpY2A7CiAgICAgICAgfSwKICAgICAgICBzaW5nbGVJbnB1dENsYXNzZXNzKCkgewogICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5jbGFzc2VzfS1zaW5nbGUtaW5wdXRgOwogICAgICAgIH0sCiAgICAgICAgZG91YmxlSW5wdXRCb3hDbGFzc2VzcygpIHsKICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuY2xhc3Nlc30tZG91YmxlLWlucHV0LWJveGA7CiAgICAgICAgfSwKICAgICAgICByZW1vdGUoKSB7CiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuZmllbGQuYXBpOwogICAgICAgIH0sCiAgICAgICAgZmlsdGVyYWJsZSgpIHsKICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5maWVsZC5hcGkgfHwgdGhpcy5maWVsZC5maWx0ZXJhYmxlOwogICAgICAgIH0sCiAgICAgICAgZW5hYmxlcygpIHsKICAgICAgICAgICAgY29uc3QgZW5hYmxlcyA9IHRoaXMuZmllbGQuZW5hYmxlcyB8fCBbXTsKICAgICAgICAgICAgcmV0dXJuIGVuYWJsZXMubWFwKGxvZ2ljID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGxvZ2ljSW5wdXRNYXBbbG9naWNdLmxhYmVsLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBsb2dpYwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICB2YWx1ZVR5cGUoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy52YWx1ZS5sb2dpYykgewogICAgICAgICAgICAgICAgcmV0dXJuICd0ZXh0JzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbG9naWNJbnB1dE1hcFt0aGlzLnZhbHVlLmxvZ2ljXS52YWx1ZVR5cGUgfHwgJ3RleHQnOwogICAgICAgIH0sCiAgICAgICAgZm9ybU1vZGVsKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtLm1vZGVsOwogICAgICAgIH0sCiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICB2YWx1ZTogewogICAgICAgICAgICBoYW5kbGVyKHt2YWx1ZX0pIHsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB2YWx1ZVswXTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZCA9IHZhbHVlWzFdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9ICcnLAogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gJyc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlZXA6IHRydWUsCiAgICAgICAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuJHdhdGNoKGBmb3JtTW9kZWwuJHt0aGlzLmZpZWxkLm1vZGVsfWAsICh7bG9naWMsIHZhbHVlID0gJyd9KSA9PiB7CiAgICAgICAgICAgIGlmICghbG9naWMpIHsKICAgICAgICAgICAgICAgIGxvZ2ljID0gdGhpcy5lbmFibGVzWzBdLnZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB7CiAgICAgICAgICAgICAgICBsb2dpYywKICAgICAgICAgICAgICAgIHZhbHVlCiAgICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHJlbW90ZU1ldGhvZCgpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmFwaSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVMb2dpY1ZhbHVlQ2hhbmdlKGUpIHsKICAgICAgICAgICAgdGhpcy52YWx1ZS52YWx1ZSA9IGUudGFyZ2V0LnZhbHVlOwogICAgICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZSgpOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlTG9naWNDaGFuZ2UobG9naWMpIHsKICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHsKICAgICAgICAgICAgICAgIGxvZ2ljLAogICAgICAgICAgICAgICAgdmFsdWU6ICcnCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSAnJzsKICAgICAgICAgICAgdGhpcy5lbmQgPSAnJzsKICAgICAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUNoYW5nZSgpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuZm9ybS5tb2RlbCwgdGhpcy5maWVsZC5tb2RlbCwgdGhpcy52YWx1ZSk7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ29uLWNoYW5nZScsIHRoaXMuZmllbGQubW9kZWwsIHRoaXMudmFsdWUsIG51bGwsIHRoaXMuZmllbGQpOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlU3RhcnRDaGFuZ2UoZSkgewogICAgICAgICAgICB0aGlzLnN0YXJ0ID0gZS50YXJnZXQudmFsdWU7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlRG91YmxlVGV4dENoYW5nZSgpOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRW5kQ2hhbmdlKGUpIHsKICAgICAgICAgICAgdGhpcy5lbmQgPSBlLnRhcmdldC52YWx1ZTsKICAgICAgICAgICAgdGhpcy5oYW5kbGVEb3VibGVUZXh0Q2hhbmdlKCk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVEb3VibGVUZXh0Q2hhbmdlKCkgewogICAgICAgICAgICB0aGlzLnZhbHVlLnZhbHVlID0gW3RoaXMuc3RhcnQsIHRoaXMuZW5kXTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnb24tY2hhbmdlJywgdGhpcy5maWVsZC5tb2RlbCwgdGhpcy52YWx1ZSwgbnVsbCwgdGhpcy5maWVsZCk7CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["fieldLogicInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fieldLogicInput.vue","sourceRoot":"node_modules/form-generator-iview/src/fields","sourcesContent":["<template>\n    <div :class=\"classes\">\n        <Select\n            :value=\"value.logic\"\n            :multiple=\"field.multiple\"\n            :disabled=\"field.disabled\"\n            :clearable=\"field.clearable\"\n            :filterable=\"field.filterable\"\n            :size=\"size\"\n            :placeholder=\"field.placeholder\"\n            :class=\"logicSelectClassess\"\n            @on-change=\"handleLogicChange\"\n        >\n            <Option\n                v-for=\"item in enables\"\n                :key=\"item.value\"\n                :value=\"item.value\"\n                :disabled=\"item.disabled\"\n            >\n                {{ item.label }}\n            </Option>\n        </Select>\n        <Input\n            v-if=\"['single', 'multiple'].includes(valueType)\"\n            :class=\"singleInputClassess\"\n            :value=\"value.value\"\n            :type=\"valueType === 'single' ? 'text' : 'textarea'\"\n            :size=\"size\"\n            :placeholder=\"field.placeholder\"\n            :clearable=\"field.clearable\"\n            :disabled=\"field.disabled\"\n            :readonly=\"field.readonly\"\n            :icon=\"field.icon\"\n            :prefix=\"field.prefix\"\n            :suffix=\"field.suffix\"\n            :autofocus=\"field.autofocus\"\n            @on-change=\"handleLogicValueChange\"\n        />\n        <div\n            v-if=\"valueType === 'double'\"\n            :class=\"doubleInputBoxClassess\"\n        >\n            <Input\n                :value=\"start\"\n                type=\"text\"\n                :size=\"size\"\n                :placeholder=\"field.placeholder\"\n                :clearable=\"field.clearable\"\n                :disabled=\"field.disabled\"\n                :readonly=\"field.readonly\"\n                :icon=\"field.icon\"\n                :prefix=\"field.prefix\"\n                :suffix=\"field.suffix\"\n                :autofocus=\"field.autofocus\"\n                :class=\"singleInputClassess\"\n                @on-change=\"handleStartChange\"\n            />\n            <span :style=\"{width: '20px',textAlign: 'center'}\">~</span>\n            <Input\n                :value=\"end\"\n                type=\"text\"\n                :size=\"size\"\n                :placeholder=\"field.placeholder\"\n                :clearable=\"field.clearable\"\n                :disabled=\"field.disabled\"\n                :readonly=\"field.readonly\"\n                :icon=\"field.icon\"\n                :prefix=\"field.prefix\"\n                :suffix=\"field.suffix\"\n                :autofocus=\"field.autofocus\"\n                :class=\"singleInputClassess\"\n                @on-change=\"handleEndChange\"\n            />\n        </div>\n    </div>\n</template>\n<script>\nimport {logicInputMap} from '../utils/const';\nimport {classPrifix} from '../utils/const';\nexport default {\n    inject: ['form'],\n    props: {\n        field: {\n            type: Object,\n            required: true\n        },\n        size: {\n            type: String,\n            default() {\n                return 'default';\n            }\n        },\n    },\n    data() {\n        return {\n            start: '',\n            end: '',\n            value: this.form.model[this.field.model] || {logic: '=', value: ''}\n        };\n    },\n    computed: {\n        classes() {\n            return `${classPrifix}-${this.field.type.toLowerCase()}`;\n        },\n        logicSelectClassess() {\n            return `${this.classes}-logic`;\n        },\n        singleInputClassess() {\n            return `${this.classes}-single-input`;\n        },\n        doubleInputBoxClassess() {\n            return `${this.classes}-double-input-box`;\n        },\n        remote() {\n            return !!this.field.api;\n        },\n        filterable() {\n            return !!this.field.api || this.field.filterable;\n        },\n        enables() {\n            const enables = this.field.enables || [];\n            return enables.map(logic => {\n                return {\n                    label: logicInputMap[logic].label,\n                    value: logic\n                };\n            });\n        },\n        valueType() {\n            if (!this.value.logic) {\n                return 'text';\n            }\n            return logicInputMap[this.value.logic].valueType || 'text';\n        },\n        formModel() {\n            return this.form.model;\n        },\n    },\n    watch: {\n        value: {\n            handler({value}) {\n                if (Array.isArray(value)) {\n                    this.start = value[0];\n                    this.end = value[1];\n                }\n                else {\n                    this.start = '',\n                    this.end = '';\n                }\n            },\n            deep: true,\n            immediate: true\n        }\n    },\n    created() {\n        this.$watch(`formModel.${this.field.model}`, ({logic, value = ''}) => {\n            if (!logic) {\n                logic = this.enables[0].value;\n            }\n            this.value = {\n                logic,\n                value\n            };\n        });\n    },\n    methods: {\n        remoteMethod() {\n            if (!this.field.api) {\n                return;\n            }\n            this.loading = true;\n        },\n        handleLogicValueChange(e) {\n            this.value.value = e.target.value;\n            this.handleChange();\n        },\n        handleLogicChange(logic) {\n            this.value = {\n                logic,\n                value: ''\n            };\n            this.start = '';\n            this.end = '';\n            this.handleChange();\n        },\n        handleChange() {\n            this.$set(this.form.model, this.field.model, this.value);\n            this.$emit('on-change', this.field.model, this.value, null, this.field);\n        },\n        handleStartChange(e) {\n            this.start = e.target.value;\n            this.handleDoubleTextChange();\n        },\n        handleEndChange(e) {\n            this.end = e.target.value;\n            this.handleDoubleTextChange();\n        },\n        handleDoubleTextChange() {\n            this.value.value = [this.start, this.end];\n            this.$emit('on-change', this.field.model, this.value, null, this.field);\n        }\n    }\n};\n</script>\n"]}]}