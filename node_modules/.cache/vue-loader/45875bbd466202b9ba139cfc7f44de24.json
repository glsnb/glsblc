{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/data-vis-iview/src/charts/chartBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/data-vis-iview/src/charts/chartBar.vue","mtime":1576069822427},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js","mtime":1575878146703},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBlY2hhcnRzIGZyb20gJ2VjaGFydHMnOwppbXBvcnQgdGRUaGVtZSBmcm9tICcuL3RoZW1lLmpzb24nOwppbXBvcnQgeyBvbiwgb2ZmIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnOwppbXBvcnQgZGF0YUdldHRlciBmcm9tICcuLi9taXhpbnMvZGF0YUdldHRlcic7CmltcG9ydCB7Y2xhc3NQcmlmaXh9IGZyb20gJy4uL3V0aWxzL2NvbnN0JzsKZWNoYXJ0cy5yZWdpc3RlclRoZW1lKCd0ZFRoZW1lJywgdGRUaGVtZSk7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnQ2hhcnRCYXInLAogICAgbWl4aW5zOiBbZGF0YUdldHRlcl0sCiAgICBwcm9wczogewogICAgICAgIGNoYXJ0OiB7CiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgICAgZGVmYXVsdCgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7fTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgZG9tOiBudWxsLAogICAgICAgICAgICBjaGFydERhdGE6IFtdLAogICAgICAgICAgICBjaGFydENvbHVtbnM6IFtdLAogICAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBjbGFzc2VzKCkgewogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgYCR7Y2xhc3NQcmlmaXh9LWNoYXJ0YCwKICAgICAgICAgICAgICAgIGAke2NsYXNzUHJpZml4fS1jaGFydC1iYXJgCiAgICAgICAgICAgIF07CiAgICAgICAgfSwKICAgICAgICBkYXRhKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFydC5hcGkgPyB0aGlzLmNoYXJ0RGF0YSA6IHRoaXMuY2hhcnQuZGF0YTsKICAgICAgICB9LAogICAgICAgIGNvbHVtbnMoKSB7CiAgICAgICAgICAgIGxldCBjaGFydENvbHVtbnMgPSB0aGlzLmNoYXJ0Q29sdW1ucyB8fCBbXTsKICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSB0aGlzLmNoYXJ0LmNvbHVtbnMgfHwgW107CiAgICAgICAgICAgIHJldHVybiBjaGFydENvbHVtbnMubGVuZ3RoID4gMCA/IGNoYXJ0Q29sdW1ucyA6IGNvbHVtbnM7CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQgKCkgewogICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgICAgdGhpcy4kd2F0Y2goJ2NoYXJ0JywgKCkgPT4gewogICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgIH0pOwogICAgfSwKICAgIGJlZm9yZURlc3Ryb3kgKCkgewogICAgICAgIG9mZih3aW5kb3csICdyZXNpemUnLCB0aGlzLnJlc2l6ZSk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHJlc2l6ZSAoKSB7CiAgICAgICAgICAgIHRoaXMuZG9tICYmIHRoaXMuZG9tLnJlc2l6ZSgpOwogICAgICAgIH0sCiAgICAgICAgZ2V0RGF0YUZpbmlzaGVkKCkgewogICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgIH0sCiAgICAgICAgcmVuZGVyKCkgewogICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICAgICAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5jb2x1bW5zOwogICAgICAgICAgICBjb25zdCBpc1ZldGljYWwgPSB0aGlzLmNoYXJ0LmRpcmVjdGlvbiA9PT0gJ3ZldGljYWwnOwogICAgICAgICAgICB0aGlzLmRvbSAmJiB0aGlzLmRvbS5jbGVhcigpOwogICAgICAgICAgICB0aGlzLmRvbSA9IHRoaXMuJHJlZnMuZG9tICYmIGVjaGFydHMuaW5pdCh0aGlzLiRyZWZzLmRvbSwgJ3RkVGhlbWUnKTsKICAgICAgICAgICAgaWYgKGNvbHVtbnMubGVuZ3RoID09PSAwIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IG9wdGlvbiA9IHsKICAgICAgICAgICAgICAgIHRvb2xib3g6IHsKICAgICAgICAgICAgICAgICAgICB0b3A6ICctMSUnLAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnNCUnLAogICAgICAgICAgICAgICAgICAgIGZlYXR1cmU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUFzSW1hZ2U6IHt9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdyaWQ6IHsKICAgICAgICAgICAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB4QXhpczogaXNWZXRpY2FsCiAgICAgICAgICAgICAgICAgICAgPyB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScKICAgICAgICAgICAgICAgICAgICB9IDogewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb2x1bW5zCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHlBeGlzOiBpc1ZldGljYWwKICAgICAgICAgICAgICAgICAgICA/IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY29sdW1ucwogICAgICAgICAgICAgICAgICAgIH0gOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd2YWx1ZScKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2JhcicKICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuZG9tICYmIHRoaXMuZG9tLnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICBvbih3aW5kb3csICdyZXNpemUnLCB0aGlzLnJlc2l6ZSk7CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["chartBar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chartBar.vue","sourceRoot":"node_modules/data-vis-iview/src/charts","sourcesContent":["<template>\n    <div :class=\"[loadingClasses, classes]\">\n        <Spin\n            v-if=\"loading\"\n            :class=\"spinClasses\"\n            size=\"large\"\n        />\n        <div\n            ref=\"dom\"\n            :class=\"classes\"\n        />\n    </div>\n</template>\n\n<script>\nimport echarts from 'echarts';\nimport tdTheme from './theme.json';\nimport { on, off } from '../utils/utils';\nimport dataGetter from '../mixins/dataGetter';\nimport {classPrifix} from '../utils/const';\necharts.registerTheme('tdTheme', tdTheme);\n\nexport default {\n    name: 'ChartBar',\n    mixins: [dataGetter],\n    props: {\n        chart: {\n            type: Object,\n            default() {\n                return {};\n            }\n        }\n    },\n    data () {\n        return {\n            loading: false,\n            dom: null,\n            chartData: [],\n            chartColumns: [],\n        };\n    },\n    computed: {\n        classes() {\n            return [\n                `${classPrifix}-chart`,\n                `${classPrifix}-chart-bar`\n            ];\n        },\n        data() {\n            return this.chart.api ? this.chartData : this.chart.data;\n        },\n        columns() {\n            let chartColumns = this.chartColumns || [];\n            let columns = this.chart.columns || [];\n            return chartColumns.length > 0 ? chartColumns : columns;\n        }\n    },\n    mounted () {\n        this.render();\n        this.$watch('chart', () => {\n            this.render();\n        });\n    },\n    beforeDestroy () {\n        off(window, 'resize', this.resize);\n    },\n    methods: {\n        resize () {\n            this.dom && this.dom.resize();\n        },\n        getDataFinished() {\n            this.render();\n        },\n        render() {\n            const data = this.data;\n            const columns = this.columns;\n            const isVetical = this.chart.direction === 'vetical';\n            this.dom && this.dom.clear();\n            this.dom = this.$refs.dom && echarts.init(this.$refs.dom, 'tdTheme');\n            if (columns.length === 0 || data.length === 0) {\n                return;\n            }\n            let option = {\n                toolbox: {\n                    top: '-1%',\n                    right: '4%',\n                    feature: {\n                        saveAsImage: {}\n                    }\n                },\n                grid: {\n                    containLabel: true\n                },\n                xAxis: isVetical\n                    ? {\n                        type: 'value'\n                    } : {\n                        type: 'category',\n                        data: columns\n                    },\n                yAxis: isVetical\n                    ? {\n                        type: 'category',\n                        data: columns\n                    } : {\n                        type: 'value'\n                    },\n                series: [{\n                    data: data,\n                    type: 'bar'\n                }]\n            };\n            this.dom && this.dom.setOption(option);\n            on(window, 'resize', this.resize);\n        }\n    }\n};\n</script>\n"]}]}