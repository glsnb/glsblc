{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldLogicSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/form-generator-iview/src/fields/fieldLogicSelect.vue","mtime":1576581289804},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js","mtime":1575878146703},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bG9naWNJbnB1dE1hcH0gZnJvbSAnLi4vdXRpbHMvY29uc3QnOwppbXBvcnQge2NsYXNzUHJpZml4fSBmcm9tICcuLi91dGlscy9jb25zdCc7CmltcG9ydCBnZXRPcHRpb25zIGZyb20gJy4uL21peGlucy9nZXRPcHRpb25zJzsKZXhwb3J0IGRlZmF1bHQgewogICAgaW5qZWN0OiBbJ2Zvcm0nXSwKICAgIG1peGluczogW2dldE9wdGlvbnNdLAogICAgcHJvcHM6IHsKICAgICAgICBmaWVsZDogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBhcGlCYXNlOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogJycKICAgICAgICB9LAogICAgICAgIHNpemU6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuICdkZWZhdWx0JzsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzdGFydDogJycsCiAgICAgICAgICAgIGVuZDogJycsCiAgICAgICAgICAgIHZhbHVlOiB0aGlzLmZvcm0ubW9kZWxbdGhpcy5maWVsZC5tb2RlbF0gfHwge2xvZ2ljOiAnPScsIHZhbHVlOiAnJ30sCiAgICAgICAgICAgIG9wdGlvbnM6IFtdCiAgICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIGxvZ2ljKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5sb2dpYzsKICAgICAgICB9LAogICAgICAgIGNsYXNzZXMoKSB7CiAgICAgICAgICAgIHJldHVybiBgJHtjbGFzc1ByaWZpeH0tJHt0aGlzLmZpZWxkLnR5cGUudG9Mb3dlckNhc2UoKX1gOwogICAgICAgIH0sCiAgICAgICAgbWlkQ2xhc3NlcygpIHsKICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuY2xhc3Nlc30tbG9naWMtbWlkYDsKICAgICAgICB9LAogICAgICAgIGxvZ2ljU2VsZWN0Q2xhc3Nlc3MoKSB7CiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmNsYXNzZXN9LWxvZ2ljYDsKICAgICAgICB9LAogICAgICAgIHNpbmdsZVNlbGVjdENsYXNzZXNzKCkgewogICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5jbGFzc2VzfS1zaW5nbGUtc2VsZWN0YDsKICAgICAgICB9LAogICAgICAgIGRvdWJsZVNlbGVjdEJveENsYXNzZXNzKCkgewogICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5jbGFzc2VzfS1kb3VibGUtc2VsZWN0LWJveGA7CiAgICAgICAgfSwKICAgICAgICByZW1vdGUoKSB7CiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuZmllbGQuYXBpOwogICAgICAgIH0sCiAgICAgICAgZmlsdGVyYWJsZSgpIHsKICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5maWVsZC5hcGkgfHwgdGhpcy5maWVsZC5maWx0ZXJhYmxlOwogICAgICAgIH0sCiAgICAgICAgZW5hYmxlcygpIHsKICAgICAgICAgICAgY29uc3QgZW5hYmxlcyA9IHRoaXMuZmllbGQuZW5hYmxlcyB8fCBbXTsKICAgICAgICAgICAgcmV0dXJuIGVuYWJsZXMubWFwKGxvZ2ljID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGxvZ2ljSW5wdXRNYXBbbG9naWNdLmxhYmVsLAogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBsb2dpYwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICB2YWx1ZVR5cGUoKSB7CiAgICAgICAgICAgIGlmICghdGhpcy52YWx1ZS5sb2dpYykgewogICAgICAgICAgICAgICAgcmV0dXJuICd0ZXh0JzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbG9naWNJbnB1dE1hcFt0aGlzLnZhbHVlLmxvZ2ljXS52YWx1ZVR5cGUgfHwgJ3RleHQnOwogICAgICAgIH0sCiAgICAgICAgY29tcHV0ZWRPcHRpb25zKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmxlbmd0aCA+IDAgPyB0aGlzLm9wdGlvbnMgOiB0aGlzLmZpZWxkLm9wdGlvbnM7CiAgICAgICAgfSwKICAgICAgICBmb3JtTW9kZWwoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm0ubW9kZWw7CiAgICAgICAgfSwKICAgIH0sCiAgICB3YXRjaDogewogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgIGhhbmRsZXIoe3ZhbHVlfSkgewogICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IHZhbHVlWzBdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gdmFsdWVbMV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gJycsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmQgPSAnJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVlcDogdHJ1ZSwKICAgICAgICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy4kd2F0Y2goYGZvcm1Nb2RlbC4ke3RoaXMuZmllbGQubW9kZWx9YCwgKHtsb2dpYywgdmFsdWUgPSAnJ30pID0+IHsKICAgICAgICAgICAgaWYgKCFsb2dpYykgewogICAgICAgICAgICAgICAgbG9naWMgPSB0aGlzLmVuYWJsZXNbMF0udmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHsKICAgICAgICAgICAgICAgIGxvZ2ljLAogICAgICAgICAgICAgICAgdmFsdWUKICAgICAgICAgICAgfTsKICAgICAgICB9KTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgcmVtb3RlTWV0aG9kKCkgewogICAgICAgICAgICBpZiAoIXRoaXMuZmllbGQuYXBpKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5nZXRSZW1vdGVPcHRpb25zKCk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVMb2dpY1ZhbHVlQ2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWUudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZUxvZ2ljQ2hhbmdlKGxvZ2ljKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB7CiAgICAgICAgICAgICAgICBsb2dpYywKICAgICAgICAgICAgICAgIHZhbHVlOiAnJwogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnN0YXJ0ID0gJyc7CiAgICAgICAgICAgIHRoaXMuZW5kID0gJyc7CiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlKCk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDaGFuZ2UoKSB7CiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm0ubW9kZWwsIHRoaXMuZmllbGQubW9kZWwsIHRoaXMudmFsdWUpOwogICAgICAgICAgICB0aGlzLiRlbWl0KCdvbi1jaGFuZ2UnLCB0aGlzLmZpZWxkLm1vZGVsLCB0aGlzLnZhbHVlLCBudWxsLCB0aGlzLmZpZWxkKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZVN0YXJ0Q2hhbmdlKHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB2YWx1ZTsKICAgICAgICAgICAgdGhpcy5oYW5kbGVEb3VibGVUZXh0Q2hhbmdlKCk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVFbmRDaGFuZ2UodmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5lbmQgPSB2YWx1ZTsKICAgICAgICAgICAgdGhpcy5oYW5kbGVEb3VibGVUZXh0Q2hhbmdlKCk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVEb3VibGVUZXh0Q2hhbmdlKCkgewogICAgICAgICAgICB0aGlzLnZhbHVlLnZhbHVlID0gW3RoaXMuc3RhcnQsIHRoaXMuZW5kXTsKICAgICAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2UoKTsKICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["fieldLogicSelect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fieldLogicSelect.vue","sourceRoot":"node_modules/form-generator-iview/src/fields","sourcesContent":["<template>\n    <div :class=\"classes\">\n        <Select\n            :value=\"value.logic\"\n            :disabled=\"field.disabled\"\n            :clearable=\"field.clearable\"\n            :size=\"size\"\n            placeholder=\"请选择逻辑类型\"\n            :class=\"logicSelectClassess\"\n            @on-change=\"handleLogicChange\"\n        >\n            <Option\n                v-for=\"item in enables\"\n                :key=\"item.value\"\n                :value=\"item.value\"\n                :disabled=\"item.disabled\"\n            >\n                {{ item.label }}\n            </Option>\n        </Select>\n        <Select\n            v-if=\"['single', 'multiple'].includes(valueType) && remote\"\n            :value=\"value.value\"\n            :multiple=\"valueType === 'multiple'\"\n            :disabled=\"field.disabled\"\n            :clearable=\"field.clearable\"\n            :filterable=\"filterable\"\n            :size=\"size\"\n            :placeholder=\"field.placeholder\"\n            :remote=\"remote\"\n            :remote-method=\"remoteMethod\"\n            :class=\"singleSelectClassess\"\n            @on-change=\"handleLogicValueChange\"\n        >\n            <Option\n                v-for=\"item in computedOptions\"\n                :key=\"item.value\"\n                :value=\"item.value\"\n                :disabled=\"item.disabled\"\n            >{{ item.label }}</Option>\n        </Select>\n        <Select\n            v-if=\"['single', 'multiple'].includes(valueType) && !remote\"\n            :value=\"value.value\"\n            :multiple=\"valueType === 'multiple'\"\n            :disabled=\"field.disabled\"\n            :clearable=\"field.clearable\"\n            :filterable=\"filterable\"\n            :size=\"size\"\n            :placeholder=\"field.placeholder\"\n            :class=\"singleSelectClassess\"\n            @on-change=\"handleLogicValueChange\"\n        >\n            <Option\n                v-for=\"item in computedOptions\"\n                :key=\"item.value\"\n                :value=\"item.value\"\n                :disabled=\"item.disabled\"\n            >{{ item.label }}</Option>\n        </Select>\n        <div\n            v-if=\"valueType === 'double'\"\n            :class=\"doubleSelectBoxClassess\"\n        >\n            <Select\n                v-if=\"remote\"\n                :value=\"start\"\n                :disabled=\"field.disabled\"\n                :clearable=\"field.clearable\"\n                :filterable=\"filterable\"\n                :size=\"size\"\n                :placeholder=\"field.placeholder\"\n                :remote=\"remote\"\n                :remote-method=\"remoteMethod\"\n                :class=\"singleSelectClassess\"\n                @on-change=\"handleStartChange\"\n            >\n                <Option\n                    v-for=\"item in computedOptions\"\n                    :key=\"item.value\"\n                    :value=\"item.value\"\n                    :disabled=\"item.disabled\"\n                >{{ item.label }}</Option>\n            </Select>\n            <Select\n                v-else\n                :value=\"start\"\n                :disabled=\"field.disabled\"\n                :clearable=\"field.clearable\"\n                :filterable=\"filterable\"\n                :size=\"size\"\n                :placeholder=\"field.placeholder\"\n                :class=\"singleSelectClassess\"\n                @on-change=\"handleStartChange\"\n            >\n                <Option\n                    v-for=\"item in computedOptions\"\n                    :key=\"item.value\"\n                    :value=\"item.value\"\n                    :disabled=\"item.disabled\"\n                >{{ item.label }}</Option>\n            </Select>\n            <span :class=\"midClasses\">~</span>\n            <Select\n                v-if=\"remote\"\n                :value=\"end\"\n                :disabled=\"field.disabled\"\n                :clearable=\"field.clearable\"\n                :filterable=\"filterable\"\n                :size=\"size\"\n                :placeholder=\"field.placeholder\"\n                :remote=\"remote\"\n                :remote-method=\"remoteMethod\"\n                :class=\"singleSelectClassess\"\n                @on-change=\"handleEndChange\"\n            >\n                <Option\n                    v-for=\"item in computedOptions\"\n                    :key=\"item.value\"\n                    :value=\"item.value\"\n                    :disabled=\"item.disabled\"\n                >{{ item.label }}</Option>\n            </Select>\n            <Select\n                v-else\n                :value=\"end\"\n                :disabled=\"field.disabled\"\n                :clearable=\"field.clearable\"\n                :filterable=\"filterable\"\n                :size=\"size\"\n                :placeholder=\"field.placeholder\"\n                :class=\"singleSelectClassess\"\n                @on-change=\"handleEndChange\"\n            >\n                <Option\n                    v-for=\"item in computedOptions\"\n                    :key=\"item.value\"\n                    :value=\"item.value\"\n                    :disabled=\"item.disabled\"\n                >{{ item.label }}</Option>\n            </Select>\n        </div>\n    </div>\n</template>\n<script>\nimport {logicInputMap} from '../utils/const';\nimport {classPrifix} from '../utils/const';\nimport getOptions from '../mixins/getOptions';\nexport default {\n    inject: ['form'],\n    mixins: [getOptions],\n    props: {\n        field: {\n            type: Object,\n            required: true\n        },\n        apiBase: {\n            type: String,\n            default: ''\n        },\n        size: {\n            type: String,\n            default() {\n                return 'default';\n            }\n        },\n    },\n    data() {\n        return {\n            start: '',\n            end: '',\n            value: this.form.model[this.field.model] || {logic: '=', value: ''},\n            options: []\n        };\n    },\n    computed: {\n        logic() {\n            return this.value.logic;\n        },\n        classes() {\n            return `${classPrifix}-${this.field.type.toLowerCase()}`;\n        },\n        midClasses() {\n            return `${this.classes}-logic-mid`;\n        },\n        logicSelectClassess() {\n            return `${this.classes}-logic`;\n        },\n        singleSelectClassess() {\n            return `${this.classes}-single-select`;\n        },\n        doubleSelectBoxClassess() {\n            return `${this.classes}-double-select-box`;\n        },\n        remote() {\n            return !!this.field.api;\n        },\n        filterable() {\n            return !!this.field.api || this.field.filterable;\n        },\n        enables() {\n            const enables = this.field.enables || [];\n            return enables.map(logic => {\n                return {\n                    label: logicInputMap[logic].label,\n                    value: logic\n                };\n            });\n        },\n        valueType() {\n            if (!this.value.logic) {\n                return 'text';\n            }\n            return logicInputMap[this.value.logic].valueType || 'text';\n        },\n        computedOptions() {\n            return this.options.length > 0 ? this.options : this.field.options;\n        },\n        formModel() {\n            return this.form.model;\n        },\n    },\n    watch: {\n        value: {\n            handler({value}) {\n                if (Array.isArray(value)) {\n                    this.start = value[0];\n                    this.end = value[1];\n                }\n                else {\n                    this.start = '',\n                    this.end = '';\n                }\n            },\n            deep: true,\n            immediate: true\n        }\n    },\n    created() {\n        this.$watch(`formModel.${this.field.model}`, ({logic, value = ''}) => {\n            if (!logic) {\n                logic = this.enables[0].value;\n            }\n            this.value = {\n                logic,\n                value\n            };\n        });\n    },\n    methods: {\n        remoteMethod() {\n            if (!this.field.api) {\n                return;\n            }\n            this.getRemoteOptions();\n        },\n        handleLogicValueChange(value) {\n            this.value.value = value;\n            this.handleChange();\n        },\n        handleLogicChange(logic) {\n            this.value = {\n                logic,\n                value: ''\n            };\n            this.start = '';\n            this.end = '';\n            this.handleChange();\n        },\n        handleChange() {\n            this.$set(this.form.model, this.field.model, this.value);\n            this.$emit('on-change', this.field.model, this.value, null, this.field);\n        },\n        handleStartChange(value) {\n            this.start = value;\n            this.handleDoubleTextChange();\n        },\n        handleEndChange(value) {\n            this.end = value;\n            this.handleDoubleTextChange();\n        },\n        handleDoubleTextChange() {\n            this.value.value = [this.start, this.end];\n            this.handleChange();\n        }\n    }\n};\n</script>\n"]}]}