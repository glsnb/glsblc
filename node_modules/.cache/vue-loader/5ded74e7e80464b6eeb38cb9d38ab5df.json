{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/data-vis-iview/src/charts/chartFunnel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/data-vis-iview/src/charts/chartFunnel.vue","mtime":1576069822427},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBlY2hhcnRzIGZyb20gJ2VjaGFydHMnOwppbXBvcnQgdGRUaGVtZSBmcm9tICcuL3RoZW1lLmpzb24nOwppbXBvcnQgeyBvbiwgb2ZmIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnOwppbXBvcnQgZGF0YUdldHRlciBmcm9tICcuLi9taXhpbnMvZGF0YUdldHRlcic7CmltcG9ydCB7Y2xhc3NQcmlmaXh9IGZyb20gJy4uL3V0aWxzL2NvbnN0JzsKCmVjaGFydHMucmVnaXN0ZXJUaGVtZSgndGRUaGVtZScsIHRkVGhlbWUpOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ0NoYXJ0RnVubmVsJywKICAgIG1peGluczogW2RhdGFHZXR0ZXJdLAogICAgcHJvcHM6IHsKICAgICAgICBjaGFydDogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgICAgICAgICByZXR1cm4ge307CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgZGF0YSAoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIGRvbTogbnVsbCwKICAgICAgICAgICAgY2hhcnRDb2x1bW5zOiBbXSwKICAgICAgICAgICAgY2hhcnREYXRhOiBbXQogICAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBjbGFzc2VzKCkgewogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgYCR7Y2xhc3NQcmlmaXh9LWNoYXJ0YCwKICAgICAgICAgICAgICAgIGAke2NsYXNzUHJpZml4fS1jaGFydC1mdW5uZWxgCiAgICAgICAgICAgIF07CiAgICAgICAgfSwKICAgICAgICBkaXNwbGF5Q2xhc3NlcygpIHsKICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBbYCR7Y2xhc3NQcmlmaXh9LWhpZGVgXTogdGhpcy5sb2FkaW5nLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdOwogICAgICAgIH0sCiAgICAgICAgZGF0YSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnQuYXBpID8gdGhpcy5jaGFydERhdGEgOiB0aGlzLmNoYXJ0LmRhdGE7CiAgICAgICAgfSwKICAgICAgICBjb2x1bW5zKCkgewogICAgICAgICAgICBsZXQgY2hhcnRDb2x1bW5zID0gdGhpcy5jaGFydENvbHVtbnMgfHwgW107CiAgICAgICAgICAgIGxldCBjb2x1bW5zID0gdGhpcy5jaGFydC5jb2x1bW5zIHx8IFtdOwogICAgICAgICAgICByZXR1cm4gY2hhcnRDb2x1bW5zLmxlbmd0aCA+IDAgPyBjaGFydENvbHVtbnMgOiBjb2x1bW5zOwogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkICgpIHsKICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgIHRoaXMuJHdhdGNoKCdjaGFydCcsICgpID0+IHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBiZWZvcmVEZXN0cm95ICgpIHsKICAgICAgICBvZmYod2luZG93LCAncmVzaXplJywgdGhpcy5yZXNpemUpOwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICByZXNpemUgKCkgewogICAgICAgICAgICB0aGlzLmRvbSAmJiB0aGlzLmRvbS5yZXNpemUoKTsKICAgICAgICB9LAogICAgICAgIGdldERhdGFGaW5pc2hlZCgpIHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICB9LAogICAgICAgIHJlbmRlcigpIHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgICAgICAgdGhpcy5kb20gJiYgdGhpcy5kb20uY2xlYXIoKTsKICAgICAgICAgICAgdGhpcy5kb20gPSB0aGlzLiRyZWZzLmRvbSAmJiBlY2hhcnRzLmluaXQodGhpcy4kcmVmcy5kb20sICd0ZFRoZW1lJyk7CiAgICAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBvcHRpb24gPSB7CiAgICAgICAgICAgICAgICB0b29sYm94OiB7CiAgICAgICAgICAgICAgICAgICAgdG9wOiAnLTElJywKICAgICAgICAgICAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgICAgICAgICAgICBmZWF0dXJlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVBc0ltYWdlOiB7fQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2l0ZW0nLAogICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogJ3thfSA8YnIvPntifSA6IHtjfSUnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZ3JpZDogewogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxlZ2VuZDogewogICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuY29sdW1ucwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNhbGN1bGFibGU6IHRydWUsCiAgICAgICAgICAgICAgICBzZXJpZXM6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuY2hhcnQubGFiZWwsCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5uZWwnLAogICAgICAgICAgICAgICAgICAgICAgICBtaW46IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogMTAwLAogICAgICAgICAgICAgICAgICAgICAgICBtaW5TaXplOiAnMCUnLAogICAgICAgICAgICAgICAgICAgICAgICBtYXhTaXplOiAnMTAwJScsCiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnQ6ICdkZXNjZW5kaW5nJywKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ291c2lkZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6ICd7Yn06IHtjfSUnCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsTGluZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzb2xpZCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZW1waGFzaXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDE0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IGZ1bmN0aW9uIChpZHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOi2iuW+gOWQjueahOaVsOaNruW7tui/n+i2iuWkpwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkeCAqIDEwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmRvbSAmJiB0aGlzLmRvbS5zZXRPcHRpb24ob3B0aW9uKTsKICAgICAgICAgICAgb24od2luZG93LCAncmVzaXplJywgdGhpcy5yZXNpemUpOwogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["chartFunnel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"chartFunnel.vue","sourceRoot":"node_modules/data-vis-iview/src/charts","sourcesContent":["<template>\n    <div :class=\"[loadingClasses, classes, displayClasses]\">\n        <Spin\n            v-if=\"loading\"\n            :class=\"spinClasses\"\n            size=\"large\"\n        />\n        <div\n            ref=\"dom\"\n            :class=\"classes\"\n        />\n    </div>\n</template>\n\n<script>\nimport echarts from 'echarts';\nimport tdTheme from './theme.json';\nimport { on, off } from '../utils/utils';\nimport dataGetter from '../mixins/dataGetter';\nimport {classPrifix} from '../utils/const';\n\necharts.registerTheme('tdTheme', tdTheme);\n\nexport default {\n    name: 'ChartFunnel',\n    mixins: [dataGetter],\n    props: {\n        chart: {\n            type: Object,\n            default() {\n                return {};\n            }\n        }\n    },\n    data () {\n        return {\n            loading: false,\n            dom: null,\n            chartColumns: [],\n            chartData: []\n        };\n    },\n    computed: {\n        classes() {\n            return [\n                `${classPrifix}-chart`,\n                `${classPrifix}-chart-funnel`\n            ];\n        },\n        displayClasses() {\n            return [\n                {\n                    [`${classPrifix}-hide`]: this.loading,\n                }\n            ];\n        },\n        data() {\n            return this.chart.api ? this.chartData : this.chart.data;\n        },\n        columns() {\n            let chartColumns = this.chartColumns || [];\n            let columns = this.chart.columns || [];\n            return chartColumns.length > 0 ? chartColumns : columns;\n        }\n    },\n    mounted () {\n        this.render();\n        this.$watch('chart', () => {\n            this.render();\n        });\n    },\n    beforeDestroy () {\n        off(window, 'resize', this.resize);\n    },\n    methods: {\n        resize () {\n            this.dom && this.dom.resize();\n        },\n        getDataFinished() {\n            this.render();\n        },\n        render() {\n            const data = this.data;\n            this.dom && this.dom.clear();\n            this.dom = this.$refs.dom && echarts.init(this.$refs.dom, 'tdTheme');\n            if (data.length === 0) {\n                return;\n            }\n            let option = {\n                toolbox: {\n                    top: '-1%',\n                    right: '4%',\n                    feature: {\n                        saveAsImage: {}\n                    }\n                },\n                tooltip: {\n                    trigger: 'item',\n                    formatter: '{a} <br/>{b} : {c}%'\n                },\n                grid: {\n                    containLabel: true\n                },\n                legend: {\n                    data: this.columns\n                },\n                calculable: true,\n                series: [\n                    {\n                        name: this.chart.label,\n                        type: 'funnel',\n                        min: 0,\n                        max: 100,\n                        minSize: '0%',\n                        maxSize: '100%',\n                        sort: 'descending',\n                        label: {\n                            show: true,\n                            position: 'ouside',\n                            formatter: '{b}: {c}%'\n                        },\n                        labelLine: {\n                            length: 10,\n                            lineStyle: {\n                                width: 1,\n                                type: 'solid'\n                            }\n                        },\n                        emphasis: {\n                            label: {\n                                fontSize: 14\n                            }\n                        },\n                        data: this.data,\n                        animationDuration: function (idx) {\n                            // 越往后的数据延迟越大\n                            return idx * 1000;\n                        }\n                    }\n                ],\n            };\n            this.dom && this.dom.setOption(option);\n            on(window, 'resize', this.resize);\n        }\n    }\n};\n</script>\n"]}]}