{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/src/page/data-report/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/src/page/data-report/index.vue","mtime":1576581821236},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js","mtime":1575878146703},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJAL2xpYnMvYXBpLnJlcXVlc3QiOwppbXBvcnQgc2VydmljZXMgZnJvbSAiQC9zZXJ2aWNlIjsKY29uc3QgeyBnZXRQYWdlQ29uZmlnIH0gPSBzZXJ2aWNlc1siZGF0YS1yZXBvcnQiXTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlbDoge30sCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHBhZ2VDb25maWc6IHsKICAgICAgICBmb3JtOiB7fSwKICAgICAgICBjaGFydHM6IFtdCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZmllbGRzKCkgewogICAgICByZXR1cm4gdGhpcy5wYWdlQ29uZmlnLmZvcm0uZmllbGRzIHx8IFtdOwogICAgfSwKICAgIG9wdGlvbnMoKSB7CiAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnBhZ2VDb25maWcuZm9ybS5vcHRpb25zIHx8IFtdOwogICAgICBvcHRpb25zLmFwaUJhc2UgPSB0aGlzLmFwaUJhc2U7CiAgICAgIG9wdGlvbnMubGFiZWxXaWR0aCA9IDYwOwogICAgICBvcHRpb25zLmlubGluZSA9IHRydWU7CiAgICAgIG9wdGlvbnMubGFiZWxQb3NpdGlvbiA9ICJsZWZ0IjsKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9LAogICAgY2hhcnRzKCkgewogICAgICByZXR1cm4gdGhpcy5wYWdlQ29uZmlnLmNoYXJ0cyB8fCBbXTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBjb25zdCB7IHBhZ2VJZCB9ID0gdGhpcy4kcm91dGUucGFyYW1zOwogICAgZ2V0UGFnZUNvbmZpZyh7CiAgICAgIHBhZ2VJZAogICAgfSkudGhlbihyZXMgPT4gewogICAgICB0aGlzLnBhZ2VDb25maWcgPSByZXMuZGF0YTsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGludGVyY2VwdG9yKHVybCwgcGFyYW1zKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5yZXF1ZXN0KHsKICAgICAgICAgICAgdXJsLAogICAgICAgICAgICBtZXRob2Q6ICJnZXQiLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBjb25kaXRpb25zOiBKU09OLnN0cmluZ2lmeShwYXJhbXMpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigKICAgICAgICAgICAgcmVzID0+IHsKICAgICAgICAgICAgICBpZiAoK3Jlcy5zdGF0dXMgPT09IDApIHsKICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVqZWN0KHJlcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBlcnJvciA9PiB7CiAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgfQogICAgICAgICAgKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/page/data-report","sourcesContent":["<template>\n  <div class=\"page-data-report\">\n    <div v-if=\"loading\" class=\"page-data-report-loading\">\n      <Spin class=\"page-data-report-loading-spin\" size=\"large\" />\n    </div>\n    <div v-else>\n      <FormGenerator\n        v-if=\"fields.length > 0\"\n        ref=\"FormGenerator\"\n        class=\"page-data-report-conditions\"\n        :fields=\"fields\"\n        :model=\"model\"\n        :options=\"options\"\n      />\n      <div v-if=\"charts.length > 0\">\n        <div v-if=\"charts.length > 0\">\n          <DataVis\n            v-for=\"(item, index) in charts\"\n            :key=\"index\"\n            ref=\"DataVis\"\n            :config=\"item\"\n            class=\"data-vis\"\n            :params-container=\"model\"\n            :request-interceptor=\"interceptor\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"@/libs/api.request\";\nimport services from \"@/service\";\nconst { getPageConfig } = services[\"data-report\"];\nexport default {\n  data() {\n    return {\n      model: {},\n      loading: true,\n      pageConfig: {\n        form: {},\n        charts: []\n      }\n    };\n  },\n  computed: {\n    fields() {\n      return this.pageConfig.form.fields || [];\n    },\n    options() {\n      const options = this.pageConfig.form.options || [];\n      options.apiBase = this.apiBase;\n      options.labelWidth = 60;\n      options.inline = true;\n      options.labelPosition = \"left\";\n      return options;\n    },\n    charts() {\n      return this.pageConfig.charts || [];\n    }\n  },\n  mounted() {\n    const { pageId } = this.$route.params;\n    getPageConfig({\n      pageId\n    }).then(res => {\n      this.pageConfig = res.data;\n      this.loading = false;\n    });\n  },\n  methods: {\n    interceptor(url, params) {\n      return new Promise((resolve, reject) => {\n        axios\n          .request({\n            url,\n            method: \"get\",\n            params: {\n              conditions: JSON.stringify(params)\n            }\n          })\n          .then(\n            res => {\n              if (+res.status === 0) {\n                resolve(res);\n              } else {\n                reject(res);\n              }\n            },\n            error => {\n              reject(error);\n            }\n          );\n      });\n    }\n  }\n};\n</script>\n<style lang=\"less\">\n.page-data-report {\n  &-loading {\n    text-align: center;\n    padding: 140px;\n    &-spin {\n      display: inline-block;\n    }\n  }\n\n  .dvis-ivu {\n    margin-bottom: 0px;\n    &-header {\n      font-size: 14px;\n      margin-top: 0px;\n      margin-left: 10px;\n    }\n\n    > .ivu-divider-horizontal {\n      margin: 1px 0;\n    }\n    .dvis-ivu-row .dvis-ivu-items-box {\n      display: flex;\n      justify-content: space-around;\n    }\n    .dvis-ivu-row .dvis-ivu-items-box .dvis-ivu-item .ivu-card-body {\n      .ivu-table-body {\n        height: 304px;\n        overflow: scroll;\n      }\n    }\n    .dvis-ivu-row .dvis-ivu-items-box .dvis-ivu-item {\n      .dvis-ivu-chart-inline-items-box .dvis-ivu-chart-inline-item-box {\n        width: 31.2%;\n      }\n    }\n  }\n\n  &-conditions {\n    width: 98%;\n    background: #fff;\n    margin: 10px;\n    padding: 20px 20px 0px 20px;\n    border-radius: 10px;\n\n    .fg-ivu-form-item {\n      margin-right: 40px !important;\n    }\n  }\n\n  &-chart {\n    margin-top: 60px;\n    padding: 20px;\n    background: #fff;\n  }\n}\n</style>\n"]}]}