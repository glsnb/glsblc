{"remainingRequest":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/github/glsnb/glsblc/glsblc/node_modules/data-vis-iview/src/charts/chartTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/data-vis-iview/src/charts/chartTable.vue","mtime":1576069822427},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/thread-loader/dist/cjs.js","mtime":1575878146703},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/babel-loader/lib/index.js","mtime":1575878134225},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/cache-loader/dist/cjs.js","mtime":1576575745336},{"path":"/Users/apple/github/glsnb/glsblc/glsblc/node_modules/vue-loader/lib/index.js","mtime":1576575752870}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkYXRhR2V0dGVyIGZyb20gJy4uL21peGlucy9kYXRhR2V0dGVyJzsKaW1wb3J0IHtjbGFzc1ByaWZpeH0gZnJvbSAnLi4vdXRpbHMvY29uc3QnOwppbXBvcnQge3hsc0Rvd25sb2FkfSBmcm9tICcuLi91dGlscy9kb3dubG9hZCc7CmltcG9ydCB7YWRkQ29tbWFzLCBpc051bWJlciwgY2FsY3VsYXRlVGFibGVDZWxsV2lkdGh9IGZyb20gJy4uL3V0aWxzL3V0aWxzJzsKaW1wb3J0IGV4cGFuZFJvdyBmcm9tICcuL2V4cGFuZFJvdy52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnQ2hhcnRUYWJsZScsCiAgICBtaXhpbnM6IFtkYXRhR2V0dGVyXSwKICAgIHByb3BzOiB7CiAgICAgICAgY2hhcnQ6IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICBkZWZhdWx0KCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHt9OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICBkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjaGFydERhdGE6IFtdLAogICAgICAgICAgICBjaGFydENvbHVtbnM6IFtdLAogICAgICAgICAgICAvLyBtYXhXaWR0aDogMTAwLAogICAgICAgICAgICBzaG93TW9kYWw6IGZhbHNlLAogICAgICAgICAgICBzZWxlY3RlZEN1c3RvbUNvbHVtbnM6IFtdLAogICAgICAgICAgICByZW1vdGVUb3RhbDogMCwKICAgICAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgZWxXaWR0aDogMCwKICAgICAgICAgICAgc29ydDoge30sCiAgICAgICAgICAgIHJlbW90ZVBhZ2U6IHsKICAgICAgICAgICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICAgICAgICAgIHBhZ2VOdW06IDEKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBjbGFzc2VzKCkgewogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgYCR7Y2xhc3NQcmlmaXh9LWNoYXJ0YCwKICAgICAgICAgICAgICAgIGAke2NsYXNzUHJpZml4fS1jaGFydC10YWJsZWAKICAgICAgICAgICAgXTsKICAgICAgICB9LAogICAgICAgIGhlYWRlckNsYXNzZXMoKSB7CiAgICAgICAgICAgIHJldHVybiBgJHtjbGFzc1ByaWZpeH0tY2hhcnQtdGFibGUtaGVhZGVyYDsKICAgICAgICB9LAogICAgICAgIGNvbnRlbnRDbGFzc2VzKCkgewogICAgICAgICAgICByZXR1cm4gYCR7Y2xhc3NQcmlmaXh9LWNoYXJ0LXRhYmxlLWNvbnRlbnRgOwogICAgICAgIH0sCiAgICAgICAgcGFnZUNsYXNzZXMoKSB7CiAgICAgICAgICAgIHJldHVybiBgJHtjbGFzc1ByaWZpeH0tY2hhcnQtdGFibGUtcGFnZWA7CiAgICAgICAgfSwKICAgICAgICBzaG93U2l6ZXIoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmhpZGVTaXplciA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6ICF0aGlzLmNoYXJ0LmhpZGVTaXplcjsKICAgICAgICB9LAogICAgICAgIHNob3dFbGV2YXRvcigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnQuaGlkZUVsZXZhdG9yID09PSB1bmRlZmluZWQgPyB0cnVlIDogIXRoaXMuY2hhcnQuaGlkZUVsZXZhdG9yOwogICAgICAgIH0sCiAgICAgICAgZG93bmxvYWRBYmxlKCkgewogICAgICAgICAgICBpZiAodGhpcy5jaGFydC5kb3dubG9hZEFibGUgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnQuZG93bmxvYWRBYmxlOwogICAgICAgIH0sCiAgICAgICAgY29sdW1ucygpIHsKICAgICAgICAgICAgbGV0IGNoYXJ0Q29sdW1ucyA9IHRoaXMuY2hhcnRDb2x1bW5zIHx8IFtdOwogICAgICAgICAgICBsZXQgY29sdW1ucyA9IHRoaXMuY2hhcnQuY29sdW1ucyB8fCBbXTsKICAgICAgICAgICAgcmV0dXJuIGNoYXJ0Q29sdW1ucy5sZW5ndGggPiAwID8gY2hhcnRDb2x1bW5zIDogY29sdW1uczsKICAgICAgICB9LAogICAgICAgIGRhdGEoKSB7CiAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy5jaGFydC5hcGkgPyB0aGlzLmNoYXJ0RGF0YSA6IHRoaXMuY2hhcnQuZGF0YTsKICAgICAgICAgICAgbGV0IHNvcnQgPSB0aGlzLnNvcnQgfHwge307CiAgICAgICAgICAgIGlmIChzb3J0LmtleSkgewogICAgICAgICAgICAgICAgbGV0IHtrZXksIG9yZGVyfSA9IHNvcnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG9yZGVyID09PSAnZGVzYycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJba2V5XSAtIGFba2V5XTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3JkZXIgPT09ICdhc2MnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhW2tleV0gLSBiW2tleV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9LAogICAgICAgIHRvdGFsKCkgewogICAgICAgICAgICBpZiAodGhpcy5yZW1vdGVUb3RhbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlVG90YWw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5sZW5ndGg7CiAgICAgICAgfSwKICAgICAgICBxdWVyeVBhcmFtcyAoKSB7CiAgICAgICAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAuLi50aGlzLnJlbW90ZVBhZ2UKICAgICAgICAgICAgfTsKICAgICAgICAgICAgLy8gbGV0IHNvcnQgPSB0aGlzLnNvcnQ7CiAgICAgICAgICAgIC8vIGlmIChzb3J0LmtleSkgewogICAgICAgICAgICAvLyAgICAgcGFyYW1zLnNvcnQgPSB7CiAgICAgICAgICAgIC8vICAgICAgICAgW3NvcnQua2V5XTogc29ydC5vcmRlcgogICAgICAgICAgICAvLyAgICAgfTsKICAgICAgICAgICAgLy8gfQogICAgICAgICAgICByZXR1cm4gcGFyYW1zOwogICAgICAgIH0sCiAgICAgICAgaXNSZW1vdGVQYWdlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVUb3RhbCA+IDA7CiAgICAgICAgfSwKICAgICAgICBjdXN0b21Db2x1bW5zKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jaGFydC5jdXN0b21Db2x1bW5zIHx8IFtdOwogICAgICAgIH0sCiAgICAgICAgY3VzdG9tQ29sdW1uc09wdGlvbnMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbHVtbnMuZmlsdGVyKGl0ZW0gPT4gdGhpcy5jdXN0b21Db2x1bW5zLmluY2x1ZGVzKGl0ZW0ua2V5KSkgfHwgW107CiAgICAgICAgfSwKICAgICAgICBkaXNwbGF5RGF0YSgpIHsKICAgICAgICAgICAgaWYgKHRoaXMuaXNSZW1vdGVQYWdlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2xpY2UoKHRoaXMucGFnZU51bSAtIDEpICogdGhpcy5wYWdlU2l6ZSwgKHRoaXMucGFnZU51bSkgKiB0aGlzLnBhZ2VTaXplKTsKICAgICAgICB9LAogICAgICAgIGhlYWRlckNvbHVtbnNXaWR0aCgpIHsKICAgICAgICAgICAgbGV0IHdpZHRocyA9IHt9OwogICAgICAgICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgIHdpZHRoc1tpdGVtLmtleV0gPSBjYWxjdWxhdGVUYWJsZUNlbGxXaWR0aChpdGVtLnRpdGxlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB3aWR0aHM7CiAgICAgICAgfSwKICAgICAgICBjb2x1bW5zV2lkdGgoKSB7CiAgICAgICAgICAgIGxldCB3aWR0aHMgPSB0aGlzLmhlYWRlckNvbHVtbnNXaWR0aCB8fCB7fTsKICAgICAgICAgICAgdGhpcy5kaXNwbGF5RGF0YS5mb3JFYWNoKChpdGVtID0ge30pID0+IHsKICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGl0ZW0pLmZvckVhY2goZmllbGROYW1lID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXdpZHRoc1tmaWVsZE5hbWVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoc1tmaWVsZE5hbWVdID0gODA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gY2FsY3VsYXRlVGFibGVDZWxsV2lkdGgoaXRlbVtmaWVsZE5hbWVdKTsKICAgICAgICAgICAgICAgICAgICB3aWR0aHNbZmllbGROYW1lXSA9IE1hdGgubWF4KHdpZHRoc1tmaWVsZE5hbWVdLCB3aWR0aCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiB3aWR0aHM7CiAgICAgICAgfSwKICAgICAgICBpc0V4cGFuZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheURhdGEuZmluZChpdGVtID0+IHsKICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpdGVtLmNoaWxkcmVuKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNoaWxkcmVuLmxlbmd0aCA+IDA7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZGlzcGxheUNvbHVtbnMoKSB7CiAgICAgICAgICAgIGxldCBzZWxlY3RlZEN1c3RvbUNvbHVtbnMgPSB0aGlzLnNlbGVjdGVkQ3VzdG9tQ29sdW1uczsKICAgICAgICAgICAgbGV0IGN1c3RvbUNvbHVtbnMgPSB0aGlzLmN1c3RvbUNvbHVtbnM7CiAgICAgICAgICAgIGxldCBjb2x1bW5zID0gdGhpcy5jb2x1bW5zLmZpbHRlcigKICAgICAgICAgICAgICAgIGl0ZW0gPT4gIWN1c3RvbUNvbHVtbnMuaW5jbHVkZXMoaXRlbS5rZXkpCiAgICAgICAgICAgICAgICB8fCBzZWxlY3RlZEN1c3RvbUNvbHVtbnMuaW5jbHVkZXMoaXRlbS5rZXkpCiAgICAgICAgICAgICkuc2xpY2UoKTsKICAgICAgICAgICAgbGV0IGNvbHVtbnNXaWR0aCA9IHRoaXMuY29sdW1uc1dpZHRoIHx8IHt9OwogICAgICAgICAgICBsZXQgZXhwYW5kV2lkdGggPSB0aGlzLmlzRXhwYW5kID8gMzAgOiAwOwogICAgICAgICAgICBsZXQgdG90YWxXaWR0aCA9IGNvbHVtbnMubWFwKGl0ZW0gPT4gY29sdW1uc1dpZHRoW2l0ZW0ua2V5XSkucmVkdWNlKGZ1bmN0aW9uKHByZXYsY3VyKXsKICAgICAgICAgICAgICAgIHJldHVybiBwcmV2ICsgY3VyOwogICAgICAgICAgICB9LDApICsgZXhwYW5kV2lkdGg7CgogICAgICAgICAgICBsZXQgc29ydCA9IHRoaXMuc29ydCB8fCB7fTsKCiAgICAgICAgICAgIGNvbHVtbnMgPSBjb2x1bW5zLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdleHBhbmQnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpdGVtLndpZHRoID0gdGhpcy5lbFdpZHRoIDwgdG90YWxXaWR0aAogICAgICAgICAgICAgICAgICAgID8gY29sdW1uc1dpZHRoW2l0ZW0ua2V5XQogICAgICAgICAgICAgICAgICAgIDogKHRoaXMuZWxXaWR0aCAvIE9iamVjdC5rZXlzKGNvbHVtbnNXaWR0aCkubGVuZ3RoKSA8IGNvbHVtbnNXaWR0aFtpdGVtLmtleV0gPyBjb2x1bW5zV2lkdGhbaXRlbS5rZXldIDogJ2F1dG8nOwogICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv6L+c56iL5o6S5bqP77yM5YiZ6ZyA6KaB5bGV56S65o6S5bqP5L+h5oGvCiAgICAgICAgICAgICAgICBpZiAoc29ydC5rZXkgJiYgc29ydC5rZXkgPT09IGl0ZW0ua2V5KSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5zb3J0VHlwZSA9IHNvcnQub3JkZXIgfHwgJ25vcm1hbCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLnNvcnRUeXBlID0gJ25vcm1hbCc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpdGVtLnJlbmRlciA9IChoLCBwYXJhbXMpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYXJhbXMuY29sdW1uLmtleTsKICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBwYXJhbXMucm93W2tleV07CiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHQgPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/mlbTmlbAKICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW1iZXIodmFsdWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBhZGRDb21tYXModmFsdWUudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnInljZXkvY0KICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS51bml0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0ICsgJycgKyBwYXJhbXMuY29sdW1uLnVuaXQ7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzkuLpudWxsLCDliJnmmL7npLogJy0nLCDkuI3liqDljZXkvY0KICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9ICctJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgoJ3NwYW4nLCB7fSwgdGV4dCk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgIC8vIOWinuWKoOaJqeWxleWIlwogICAgICAgICAgICBpZiAodGhpcy5pc0V4cGFuZCkgewogICAgICAgICAgICAgICAgY29sdW1ucy51bnNoaWZ0KHsKICAgICAgICAgICAgICAgICAgICB3aWR0aDogZXhwYW5kV2lkdGgsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2V4cGFuZCcsCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoKGV4cGFuZFJvdywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3c6IHBhcmFtcy5yb3csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcGFyYW1zLnJvdy5jaGlsZHJlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLnNsaWNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGNvbHVtbnM7CiAgICAgICAgfSwKICAgIH0sCgogICAgd2F0Y2g6IHsKICAgICAgICBjaGFydENvbHVtbnModmFsKSB7CiAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEN1c3RvbUNvbHVtbnMgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5kZWZhdWx0U2hvdyAhPT0gZmFsc2UpLm1hcChpdGVtID0+IGl0ZW0ua2V5KTsKICAgICAgICB9CiAgICB9LAoKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5lbFdpZHRoID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy4kZWwpLndpZHRoKTsKICAgICAgICB0aGlzLnNlbGVjdGVkQ3VzdG9tQ29sdW1ucyA9IHRoaXMuY29sdW1ucy5maWx0ZXIoaXRlbSA9PiBpdGVtLmRlZmF1bHRTaG93ICE9PSBmYWxzZSkubWFwKGl0ZW0gPT4gaXRlbS5rZXkpOwogICAgICAgIHRoaXMuJHdhdGNoKCdjaGFydCcsICgpID0+IHsKICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5jaGFydERhdGEgPSBbXTsKICAgICAgICAgICAgICAgIHRoaXMuY2hhcnRDb2x1bW5zID0gW107CiAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZVRvdGFsID0gMDsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGdldERhdGFGaW5pc2hlZCgpIHt9LAogICAgICAgIGhhbmRsZUN1c3RvbUNvbHVtbnNDbGljaygpIHsKICAgICAgICAgICAgdGhpcy5zaG93TW9kYWwgPSB0cnVlOwogICAgICAgIH0sCiAgICAgICAgaGFuZGxlUGFnZUNoYW5nZShwYWdlTnVtKSB7CiAgICAgICAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW07CiAgICAgICAgICAgIGlmICh0aGlzLmlzUmVtb3RlUGFnZSkgewogICAgICAgICAgICAgICAgdGhpcy5yZW1vdGVQYWdlID0gewogICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucmVtb3RlUGFnZSwKICAgICAgICAgICAgICAgICAgICBwYWdlTnVtCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVQYWdlU2l6ZUNoYW5nZShwYWdlU2l6ZSkgewogICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7CiAgICAgICAgICAgIGlmICh0aGlzLmlzUmVtb3RlUGFnZSkgewogICAgICAgICAgICAgICAgdGhpcy5wYWdlID0gewogICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucGFnZSwKICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRG93bmxvYWRDbGljaygpIHsKICAgICAgICAgICAgaWYgKHRoaXMuY2hhcnQuZG93bkxvYWRBcGkpIHsKICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHRoaXMuY2hhcnQuZG93bkxvYWRBcGkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgLy8gZG93bmxvYWQgbG9jYWwgZGF0YQogICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gdGhpcy5jb2x1bW5zLm1hcChpdGVtID0+IGl0ZW0udGl0bGUpOwogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IFsKICAgICAgICAgICAgICAgICAgICBoZWFkZXIsCiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5kYXRhLm1hcChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucy5tYXAoZmllbGQgPT4gaXRlbVtmaWVsZC5rZXldKTsKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgIHhsc0Rvd25sb2FkKGRhdGEsIHRoaXMuY2hhcnQubGFiZWwpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTb3J0Q2hhbmdlKHtrZXksIG9yZGVyfSkgewogICAgICAgICAgICB0aGlzLnNvcnQgPSB7CiAgICAgICAgICAgICAgICBrZXksCiAgICAgICAgICAgICAgICBvcmRlcgogICAgICAgICAgICB9OwogICAgICAgIH0sCgogICAgICAgIGhhbmRsZUN1c3RvbUNvbHVtbnNDaGFuZ2UodmFsKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDdXN0b21Db2x1bW5zID0gdmFsOwogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["chartTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"chartTable.vue","sourceRoot":"node_modules/data-vis-iview/src/charts","sourcesContent":["<template>\n    <div\n        v-if=\"loading\"\n        :class=\"[loadingClasses, classes]\"\n    >\n        <Spin\n            :class=\"spinClasses\"\n            size=\"large\"\n        />\n    </div>\n    <div\n        v-else\n        :class=\"classes\"\n    >\n        <h3 :class=\"headerClasses\">\n            <Button\n                v-if=\"customColumns.length > 0\"\n                size=\"small\"\n                type=\"primary\"\n                @click=\"handleCustomColumnsClick\"\n            >\n                自定义列\n            </Button>\n            <Button\n                v-if=\"downloadAble\"\n                size=\"small\"\n                type=\"primary\"\n                @click=\"handleDownloadClick\"\n            >\n                下载数据\n            </Button>\n        </h3>\n        <Table\n            ref=\"table\"\n            stripe\n            size=\"small\"\n            :class=\"contentClasses\"\n            :columns=\"displayColumns\"\n            :data=\"displayData\"\n            :loading=\"loading\"\n            @on-sort-change=\"handleSortChange\"\n        />\n        <Page\n            :current=\"pageNum\"\n            :class=\"pageClasses\"\n            :page-size=\"pageSize\"\n            :page-size-opts=\"[10, 20, 30, 40]\"\n            :total=\"total\"\n            :show-elevator=\"showElevator\"\n            :show-sizer=\"showSizer\"\n            show-total\n            size=\"small\"\n            @on-change=\"handlePageChange\"\n            @on-page-size-change=\"handlePageSizeChange\"\n        />\n        <Modal\n            v-if=\"customColumns.length > 0\"\n            v-model=\"showModal\"\n            title=\"请选择要展示的列\"\n            footer-hide\n        >\n            <CheckboxGroup\n                :value=\"selectedCustomColumns\"\n                @on-change=\"handleCustomColumnsChange\"\n            >\n                <Checkbox\n                    v-for=\"option in customColumnsOptions\"\n                    :key=\"option.key\"\n                    :label=\"option.key\"\n                >\n                    {{ option.title }}\n                </Checkbox>\n            </CheckboxGroup>\n        </Modal>\n    </div>\n</template>\n<script>\nimport dataGetter from '../mixins/dataGetter';\nimport {classPrifix} from '../utils/const';\nimport {xlsDownload} from '../utils/download';\nimport {addCommas, isNumber, calculateTableCellWidth} from '../utils/utils';\nimport expandRow from './expandRow.vue';\nexport default {\n    name: 'ChartTable',\n    mixins: [dataGetter],\n    props: {\n        chart: {\n            type: Object,\n            default() {\n                return {};\n            }\n        }\n    },\n\n    data () {\n        return {\n            chartData: [],\n            chartColumns: [],\n            // maxWidth: 100,\n            showModal: false,\n            selectedCustomColumns: [],\n            remoteTotal: 0,\n            pageSize: 10,\n            pageNum: 1,\n            loading: false,\n            elWidth: 0,\n            sort: {},\n            remotePage: {\n                pageSize: 10,\n                pageNum: 1\n            }\n        };\n    },\n    computed: {\n        classes() {\n            return [\n                `${classPrifix}-chart`,\n                `${classPrifix}-chart-table`\n            ];\n        },\n        headerClasses() {\n            return `${classPrifix}-chart-table-header`;\n        },\n        contentClasses() {\n            return `${classPrifix}-chart-table-content`;\n        },\n        pageClasses() {\n            return `${classPrifix}-chart-table-page`;\n        },\n        showSizer() {\n            return this.chart.hideSizer === undefined ? true : !this.chart.hideSizer;\n        },\n        showElevator() {\n            return this.chart.hideElevator === undefined ? true : !this.chart.hideElevator;\n        },\n        downloadAble() {\n            if (this.chart.downloadAble === undefined) {\n                return true;\n            }\n            return this.chart.downloadAble;\n        },\n        columns() {\n            let chartColumns = this.chartColumns || [];\n            let columns = this.chart.columns || [];\n            return chartColumns.length > 0 ? chartColumns : columns;\n        },\n        data() {\n            let data = this.chart.api ? this.chartData : this.chart.data;\n            let sort = this.sort || {};\n            if (sort.key) {\n                let {key, order} = sort;\n                data = data.sort((a, b) => {\n                    if (order === 'desc') {\n                        return b[key] - a[key];\n                    }\n                    else if (order === 'asc') {\n                        return a[key] - b[key];\n                    }\n                    else {\n                        return 0;\n                    }\n                });\n            }\n            return data;\n        },\n        total() {\n            if (this.remoteTotal) {\n                return this.remoteTotal;\n            }\n            return this.data.length;\n        },\n        queryParams () {\n            let params = {\n                ...this.remotePage\n            };\n            // let sort = this.sort;\n            // if (sort.key) {\n            //     params.sort = {\n            //         [sort.key]: sort.order\n            //     };\n            // }\n            return params;\n        },\n        isRemotePage() {\n            return this.remoteTotal > 0;\n        },\n        customColumns() {\n            return this.chart.customColumns || [];\n        },\n        customColumnsOptions() {\n            return this.columns.filter(item => this.customColumns.includes(item.key)) || [];\n        },\n        displayData() {\n            if (this.isRemotePage) {\n                return this.data;\n            }\n            return this.data.slice((this.pageNum - 1) * this.pageSize, (this.pageNum) * this.pageSize);\n        },\n        headerColumnsWidth() {\n            let widths = {};\n            this.columns.forEach(item => {\n                widths[item.key] = calculateTableCellWidth(item.title);\n            });\n            return widths;\n        },\n        columnsWidth() {\n            let widths = this.headerColumnsWidth || {};\n            this.displayData.forEach((item = {}) => {\n                Object.keys(item).forEach(fieldName => {\n                    if (!widths[fieldName]) {\n                        widths[fieldName] = 80;\n                    }\n                    const width = calculateTableCellWidth(item[fieldName]);\n                    widths[fieldName] = Math.max(widths[fieldName], width);\n                });\n            });\n            return widths;\n        },\n        isExpand() {\n            return this.displayData.find(item => {\n                if (!Array.isArray(item.children)) {\n                    return false;\n                }\n                return item.children.length > 0;\n            });\n        },\n        displayColumns() {\n            let selectedCustomColumns = this.selectedCustomColumns;\n            let customColumns = this.customColumns;\n            let columns = this.columns.filter(\n                item => !customColumns.includes(item.key)\n                || selectedCustomColumns.includes(item.key)\n            ).slice();\n            let columnsWidth = this.columnsWidth || {};\n            let expandWidth = this.isExpand ? 30 : 0;\n            let totalWidth = columns.map(item => columnsWidth[item.key]).reduce(function(prev,cur){\n                return prev + cur;\n            },0) + expandWidth;\n\n            let sort = this.sort || {};\n\n            columns = columns.map(item => {\n                if (item.type === 'expand') {\n                    return item;\n                }\n                item.width = this.elWidth < totalWidth\n                    ? columnsWidth[item.key]\n                    : (this.elWidth / Object.keys(columnsWidth).length) < columnsWidth[item.key] ? columnsWidth[item.key] : 'auto';\n                // 如果是远程排序，则需要展示排序信息\n                if (sort.key && sort.key === item.key) {\n                    item.sortType = sort.order || 'normal';\n                }\n                else {\n                    item.sortType = 'normal';\n                }\n                item.render = (h, params) => {\n                    const key = params.column.key;\n                    let value = params.row[key];\n                    let text = value;\n                    // 如果是整数\n                    if (isNumber(value)) {\n                        text = addCommas(value.toString());\n                    }\n\n                    // 如果有单位\n                    if (item.unit) {\n                        text = text + '' + params.column.unit;\n                    }\n\n                    // 如果为null, 则显示 '-', 不加单位\n                    if (value === null) {\n                        text = '-';\n                    }\n                    return h('span', {}, text);\n                };\n                return item;\n            });\n\n\n            // 增加扩展列\n            if (this.isExpand) {\n                columns.unshift({\n                    width: expandWidth,\n                    type: 'expand',\n                    render: (h, params) => {\n                        return h(expandRow, {\n                            props: {\n                                row: params.row,\n                                data: params.row.children,\n                                columns: columns.slice()\n                            }\n                        });\n                    }\n                });\n            }\n            return columns;\n        },\n    },\n\n    watch: {\n        chartColumns(val) {\n            if (val.length === 0) {\n                return;\n            }\n            this.selectedCustomColumns = this.columns.filter(item => item.defaultShow !== false).map(item => item.key);\n        }\n    },\n\n    mounted() {\n        this.elWidth = parseInt(window.getComputedStyle(this.$el).width);\n        this.selectedCustomColumns = this.columns.filter(item => item.defaultShow !== false).map(item => item.key);\n        this.$watch('chart', () => {\n            this.$nextTick(() => {\n                this.chartData = [];\n                this.chartColumns = [];\n                this.remoteTotal = 0;\n            });\n        });\n    },\n    methods: {\n        getDataFinished() {},\n        handleCustomColumnsClick() {\n            this.showModal = true;\n        },\n        handlePageChange(pageNum) {\n            this.pageNum = pageNum;\n            if (this.isRemotePage) {\n                this.remotePage = {\n                    ...this.remotePage,\n                    pageNum\n                };\n            }\n        },\n        handlePageSizeChange(pageSize) {\n            this.pageSize = pageSize;\n            if (this.isRemotePage) {\n                this.page = {\n                    ...this.page,\n                    pageSize\n                };\n            }\n        },\n        handleDownloadClick() {\n            if (this.chart.downLoadApi) {\n                window.open(this.chart.downLoadApi);\n            }\n            else {\n                // download local data\n                const header = this.columns.map(item => item.title);\n                const data = [\n                    header,\n                    ...this.data.map(item => {\n                        return this.columns.map(field => item[field.key]);\n                    })\n                ];\n                xlsDownload(data, this.chart.label);\n            }\n        },\n        handleSortChange({key, order}) {\n            this.sort = {\n                key,\n                order\n            };\n        },\n\n        handleCustomColumnsChange(val) {\n            this.selectedCustomColumns = val;\n        }\n    }\n};\n</script>\n"]}]}